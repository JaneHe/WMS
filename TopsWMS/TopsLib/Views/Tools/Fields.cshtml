@{
    Layout = null;
    Tops.FRM.Biz biz = Model;
    
}

<!DOCTYPE html>

<html>
<head>
    <title>Fields</title>
    <script src="/TopsLib/Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
</head>
<body>
    <div>
    <p>@ViewBag.Msg</p>
    @if (biz != null)
    {
    <form action="/tools/Fields" method="post">
        <table>
            <tr>
                <th>BizName:</th>
                <td>@biz.BizName<input name="BizName" type="hidden" value="@biz.BizName" /></td>
            </tr>
            <tr>
                <th>Fileds:</th>
                <td>
                    <table id="fields_table">
                        @if (biz.Fields != null && biz.Fields.Count > 0)
                        {
                            for (int i = 0; i < biz.Fields.Count; i++)
                            {
                            <tr>
                                <td><input name="FieldName" value="@biz.Fields[i].FieldName " /></td>
                                <td><select name="FieldType" val="@biz.Fields[i].FieldType" >
                                    <option value="BigInt">BigInt</option>
                                    <option value="Binary">Binary</option>
                                    <option value="Bit">Bit</option>
                                    <option value="Char">Char</option>
                                    <option value="DateTime">DateTime</option>
                                    <option value="Decimal">Decimal</option>
                                    <option value="Float">Float</option>
                                    <option value="Image">Image</option>
                                    <option value="Int">Int</option>
                                    <option value="Money">Money</option>
                                    <option value="NChar">NChar</option>
                                    <option value="NText">NText</option>
                                    <option value="NVarChar">NVarChar</option>
                                    <option value="Real">Real</option>
                                    <option value="UniqueIdentifier">UniqueIdentifier</option>
                                    <option value="SmallDateTime">SmallDateTime</option>
                                    <option value="SmallInt">SmallInt</option>
                                    <option value="SmallMoney">SmallMoney</option>
                                    <option value="Text">Text</option>
                                    <option value="Timestamp">Timestamp</option>
                                    <option value="TinyInt">TinyInt</option>
                                    <option value="VarBinary">VarBinary</option>
                                    <option value="VarChar">VarChar</option>
                                    <option value="Variant">Variant</option>
                                    <option value="Xml">Xml</option>
                                    <option value="Udt">Udt</option>
                                    <option value="Structured">Structured</option>
                                    <option value="Date">Date</option>
                                    <option value="Time">Time</option>
                                    <option value="DateTime2">DateTime2</option>
                                    <option value="DateTimeOffset">DateTimeOffset</option>
                                </select></td>
                                <td><select name="IsReturn"  val="@biz.Fields[i].IsReturn" >
                                    <option value="False">False</option>
                                    <option value="True">True</option>
                                </select></td>
                                <td>
                                    <input type="button" onclick="DelField(this)"  value="删除" />
                                </td>
                            </tr>
                            }
                        }
                    </table>
                    <script type="text/javascript">
                        $("#fields_table select").each(function () {
                            $(this).val($(this).attr("val"));
                        });
                    </script>
                </td>
            </tr>
            <tr>
                <th></th>
                <td><a id="addField" href="javascript:void(0)">ⓐ添加</a></td>
            </tr>
            <tr>
                <th></th>
                <td><input type="submit" value="保存" /></td>
            </tr>
        </table>
    </form>
    }
    </div>
    <table id="tp_Fields" style=" display:none">
        <tr>
            <td><input name="FieldName" /></td>
        
            <td><select name="FieldType" >
                <option value="BigInt">BigInt</option>
                                    <option value="Binary">Binary</option>
                                    <option value="Bit">Bit</option>
                                    <option value="Char">Char</option>
                                    <option value="DateTime">DateTime</option>
                                    <option value="Decimal">Decimal</option>
                                    <option value="Float">Float</option>
                                    <option value="Image">Image</option>
                                    <option value="Int">Int</option>
                                    <option value="Money">Money</option>
                                    <option value="NChar">NChar</option>
                                    <option value="NText">NText</option>
                                    <option value="NVarChar">NVarChar</option>
                                    <option value="Real">Real</option>
                                    <option value="UniqueIdentifier">UniqueIdentifier</option>
                                    <option value="SmallDateTime">SmallDateTime</option>
                                    <option value="SmallInt">SmallInt</option>
                                    <option value="SmallMoney">SmallMoney</option>
                                    <option value="Text">Text</option>
                                    <option value="Timestamp">Timestamp</option>
                                    <option value="TinyInt">TinyInt</option>
                                    <option value="VarBinary">VarBinary</option>
                                    <option value="VarChar">VarChar</option>
                                    <option value="Variant">Variant</option>
                                    <option value="Xml">Xml</option>
                                    <option value="Udt">Udt</option>
                                    <option value="Structured">Structured</option>
                                    <option value="Date">Date</option>
                                    <option value="Time">Time</option>
                                    <option value="DateTime2">DateTime2</option>
                                    <option value="DateTimeOffset">DateTimeOffset</option>
            </select></td>
            <td><select name="IsReturn" >
                <option value="False">False</option>
                <option value="True">True</option>
            </select></td>
            <td>
                <input type="button" onclick="DelField(this)" value="删除" />
            </td>
        </tr>
    </table>
    <script type="text/javascript">
        $(function () {
            $("#addField").click(function () {
                $("#fields_table").append($("#tp_Fields").html());
            });
        });
        function DelField(obj) {
            $(obj).closest("tr").remove();
        }
    </script>
</body>
</html>
