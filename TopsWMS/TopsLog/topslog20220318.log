
**************************************************************************************************************------>2022/3/18 14:14:25
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"null"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"null"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:14:26
类型：Query 查询对象：SelSessionState 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select top 1 LoginState = 
(case when 
DATEDIFF(MINUTE,tSessionStateRecord.d_LoginTime,GETDATE())
< tSessionStateRecord.n_HoldingTime then 0 else 1 end),
UserNO = tSessionStateRecord.s_UserNO,
UserName = tUser.s_UserName
 from tSessionStateRecord tSessionStateRecord with(nolock)
 left join tUser tUser with(nolock) on tSessionStateRecord.s_UserNO = tUser.s_UserNO
where tSessionStateRecord.s_IPAddress = @IPAddress 
and tSessionStateRecord.s_UserAgent = @UserAgent
and tSessionStateRecord.s_UserNO <> ''
and tUser.n_state = 1
order by tSessionStateRecord.d_LoginTime desc
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@IPAddress" DbType:"AnsiString" Value:"::1"
（1）ParameterName:"@UserAgent" DbType:"AnsiString" Value:"Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.79 Safari/537.36"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"null"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:14:48
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"null"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"null"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:14:48
类型：Query 查询对象：SelSessionState 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select top 1 LoginState = 
(case when 
DATEDIFF(MINUTE,tSessionStateRecord.d_LoginTime,GETDATE())
< tSessionStateRecord.n_HoldingTime then 0 else 1 end),
UserNO = tSessionStateRecord.s_UserNO,
UserName = tUser.s_UserName
 from tSessionStateRecord tSessionStateRecord with(nolock)
 left join tUser tUser with(nolock) on tSessionStateRecord.s_UserNO = tUser.s_UserNO
where tSessionStateRecord.s_IPAddress = @IPAddress 
and tSessionStateRecord.s_UserAgent = @UserAgent
and tSessionStateRecord.s_UserNO <> ''
and tUser.n_state = 1
order by tSessionStateRecord.d_LoginTime desc
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@IPAddress" DbType:"AnsiString" Value:"::1"
（1）ParameterName:"@UserAgent" DbType:"AnsiString" Value:"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"null"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:14:48
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:14:48
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:14:48
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:14:55
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:14:55
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:14:55
类型：Query 查询对象：SelQAProductWarehouseInfoList 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:

select * from ( select RowNumber=row_number() over(order by 采集功能 asc),* from (
select 
--[Columns]
n_QAProductWarehouseInfo_Id,
    (case n_QAProductWarehouseInfo_QAFunction when 1 then '大东1楼QA'
    when 2 then '大东3楼QA'
	when 3 then '大东3楼预检'
	when 4 then '大东1楼终检' 
	when 5 then '高科立体库'
        when 6 then '大东1楼预检' else '' end) as '采集功能',
    (case n_QAProductWarehouseInfo_QualityStatus when 0 then '未检验'
    when 1 then '合格'
    when 2 then '待定'
    when 3 then '报废'
    when 4 then '返工'
    when 5 then '待退' else '' end) as '质量状态',
	(case n_QAProductWarehouseInfo_OpeType when 1 then '入库' else '出库' end) as '操作类型',
    n_Warehosue_Id,
    s_Warehouse_Name as '对应自动出入库的仓库名称', 
    s_Space_BarCode as '对应自动出入库的储位码',
    n_QAProductWarehouseInfo_state
--[/Columns]
from tQAProductWarehouseInfo with(nolock)
where n_QAProductWarehouseInfo_state = 1
and n_QAProductWarehouseInfo_QAFunction = (
case ISNULL(@n_QAProductWarehouseInfo_QAFunction,0) when 0
then n_QAProductWarehouseInfo_QAFunction else @n_QAProductWarehouseInfo_QAFunction end
)
and n_Warehosue_Id = (
case ISNULL(@n_Warehosue_Id,'0') when '0'
then n_Warehosue_Id else @n_Warehosue_Id end
)
) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 

 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"0"
（1）ParameterName:"@n_Warehosue_Id" DbType:"AnsiString" Value:"0"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（3）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（4）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（5）ParameterName:"@endIndex" DbType:"Int32" Value:"20"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:14:56
类型：Query 查询对象：SelQAProductWarehouseInfoList 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:

 select RowsCount=COUNT(1) from ( 
select 
 R=1 
from tQAProductWarehouseInfo with(nolock)
where n_QAProductWarehouseInfo_state = 1
and n_QAProductWarehouseInfo_QAFunction = (
case ISNULL(@n_QAProductWarehouseInfo_QAFunction,0) when 0
then n_QAProductWarehouseInfo_QAFunction else @n_QAProductWarehouseInfo_QAFunction end
)
and n_Warehosue_Id = (
case ISNULL(@n_Warehosue_Id,'0') when '0'
then n_Warehosue_Id else @n_Warehosue_Id end
)
 ) T_RowsCount 

 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"0"
（1）ParameterName:"@n_Warehosue_Id" DbType:"AnsiString" Value:"0"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（3）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（4）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（5）ParameterName:"@endIndex" DbType:"Int32" Value:"20"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:22:21
类型：Business 业务对象：UserToolsLogin 
说明：执行业务检查：1.*.用户不存在
***************************************************************************************************************
SQL:
select 1 from [TopsWMS_FRM].[dbo].[FRM_Developer] where s_UserNO = @:UserNO and n_state = 1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"heweijian"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@Password" DbType:"AnsiString" Value:"F7D46DABEE7173DB"
（3）ParameterName:"@UserName" DbType:"AnsiString" Value:"null"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:22:21
类型：Business 业务对象：UserToolsLogin 
说明：执行业务检查：2.*.用户密码错误
***************************************************************************************************************
SQL:
select 1 from [TopsWMS_FRM].[dbo].[FRM_Developer] where s_UserNO = @UserNO and s_EncryptionCipher = @:Password and n_state = 1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"heweijian"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@Password" DbType:"AnsiString" Value:"F7D46DABEE7173DB"
（3）ParameterName:"@UserName" DbType:"AnsiString" Value:""
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:22:21
类型：Business 业务对象：UserToolsLogin 
说明：执行业务过程[1]：0.查询用户名
***************************************************************************************************************
SQL:
select UserName = s_UserName from [TopsWMS_FRM].[dbo].[FRM_Developer] where s_UserNO = @UserNO and n_state = 1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"heweijian"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@Password" DbType:"AnsiString" Value:"F7D46DABEE7173DB"
（3）ParameterName:"@UserName" DbType:"AnsiString" Value:"null"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:24:17
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:24:20
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:24:21
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:24:21
类型：Query 查询对象：SelQAProductWarehouseInfoList 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:

select * from ( select RowNumber=row_number() over(order by 采集功能 asc),* from (
select 
--[Columns]
n_QAProductWarehouseInfo_Id,
    (case n_QAProductWarehouseInfo_QAFunction when 1 then '大东1楼QA'
    when 2 then '大东3楼QA'
	when 3 then '大东3楼预检'
	when 4 then '大东1楼终检' 
	when 5 then '高科立体库'
        when 6 then '大东1楼预检' else '' end) as '采集功能',
	s_QAProductWarehouseInfo_IPAddress as 'IP地址',
	s_QAProductWarehouseInfo_ProductType as '产品分类',
	s_QAProductWarehouseInfo_Color as '颜色分类',
    (case n_QAProductWarehouseInfo_QualityStatus when 0 then '未检验'
    when 1 then '合格'
    when 2 then '待定'
    when 3 then '报废'
    when 4 then '返工'
    when 5 then '待退' else '' end) as '质量状态',
	(case n_QAProductWarehouseInfo_OpeType when 1 then '入库' else '出库' end) as '操作类型',
    n_Warehosue_Id,
    s_Warehouse_Name as '对应自动出入库的仓库名称', 
    s_Space_BarCode as '对应自动出入库的储位码',
    n_QAProductWarehouseInfo_state
--[/Columns]
from tQAProductWarehouseInfo with(nolock)
where n_QAProductWarehouseInfo_state = 1
and n_QAProductWarehouseInfo_QAFunction = (
case ISNULL(@n_QAProductWarehouseInfo_QAFunction,0) when 0
then n_QAProductWarehouseInfo_QAFunction else @n_QAProductWarehouseInfo_QAFunction end
)
and n_Warehosue_Id = (
case ISNULL(@n_Warehosue_Id,'0') when '0'
then n_Warehosue_Id else @n_Warehosue_Id end
)
) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 

 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"0"
（1）ParameterName:"@n_Warehosue_Id" DbType:"AnsiString" Value:"0"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（3）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（4）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（5）ParameterName:"@endIndex" DbType:"Int32" Value:"20"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:24:21
类型：Query 查询对象：SelQAProductWarehouseInfoList 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:

 select RowsCount=COUNT(1) from ( 
select 
 R=1 
from tQAProductWarehouseInfo with(nolock)
where n_QAProductWarehouseInfo_state = 1
and n_QAProductWarehouseInfo_QAFunction = (
case ISNULL(@n_QAProductWarehouseInfo_QAFunction,0) when 0
then n_QAProductWarehouseInfo_QAFunction else @n_QAProductWarehouseInfo_QAFunction end
)
and n_Warehosue_Id = (
case ISNULL(@n_Warehosue_Id,'0') when '0'
then n_Warehosue_Id else @n_Warehosue_Id end
)
 ) T_RowsCount 

 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"0"
（1）ParameterName:"@n_Warehosue_Id" DbType:"AnsiString" Value:"0"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（3）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（4）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（5）ParameterName:"@endIndex" DbType:"Int32" Value:"20"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:24:47
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:25:55
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:26:02
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:26:02
类型：Query 查询对象：Tool_SelDictionarys 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select * from ( select RowNumber=row_number() over(order by Field desc),* from (
SELECT  
--[Columns]
    ID=n_ID,
    Field=s_Field,
    Scene=s_Scene,
    Location=s_Location,
    Caption=s_Caption,
    Type=s_Type,
    Format=s_Format,
    CommonID=s_CommonID,
    Width=s_Width,
    Sql=s_Sql
--[/Columns]
from tDictionary
where s_Location=case isnull(@Location,'') when '' then s_Location
                                                               else @Location end
and isnull(s_Field,'') like '%'+isnull(@Field,'')+'%'
and isnull(s_Caption,'') like '%'+isnull(@Caption,'') +'%'

) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Field" DbType:"AnsiString" Value:"null"
（1）ParameterName:"@Caption" DbType:"AnsiString" Value:"null"
（2）ParameterName:"@Location" DbType:"AnsiString" Value:"null"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"20"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:26:02
类型：Query 查询对象：Tool_SelDictionarys 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:
 select RowsCount=COUNT(1) from ( 
SELECT  
 R=1 
from tDictionary
where s_Location=case isnull(@Location,'') when '' then s_Location
                                                               else @Location end
and isnull(s_Field,'') like '%'+isnull(@Field,'')+'%'
and isnull(s_Caption,'') like '%'+isnull(@Caption,'') +'%'

 ) T_RowsCount 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Field" DbType:"AnsiString" Value:""
（1）ParameterName:"@Caption" DbType:"AnsiString" Value:""
（2）ParameterName:"@Location" DbType:"AnsiString" Value:""
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"20"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:26:04
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:26:04
类型：Query 查询对象：Tool_SelDictionarys 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select * from ( select RowNumber=row_number() over(order by Field desc),* from (
SELECT  
--[Columns]
    ID=n_ID,
    Field=s_Field,
    Scene=s_Scene,
    Location=s_Location,
    Caption=s_Caption,
    Type=s_Type,
    Format=s_Format,
    CommonID=s_CommonID,
    Width=s_Width,
    Sql=s_Sql
--[/Columns]
from tDictionary
where s_Location=case isnull(@Location,'') when '' then s_Location
                                                               else @Location end
and isnull(s_Field,'') like '%'+isnull(@Field,'')+'%'
and isnull(s_Caption,'') like '%'+isnull(@Caption,'') +'%'

) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Field" DbType:"AnsiString" Value:""
（1）ParameterName:"@Caption" DbType:"AnsiString" Value:""
（2）ParameterName:"@Location" DbType:"AnsiString" Value:"chs"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"10"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:26:04
类型：Query 查询对象：Tool_SelDictionarys 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:
 select RowsCount=COUNT(1) from ( 
SELECT  
 R=1 
from tDictionary
where s_Location=case isnull(@Location,'') when '' then s_Location
                                                               else @Location end
and isnull(s_Field,'') like '%'+isnull(@Field,'')+'%'
and isnull(s_Caption,'') like '%'+isnull(@Caption,'') +'%'

 ) T_RowsCount 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Field" DbType:"AnsiString" Value:""
（1）ParameterName:"@Caption" DbType:"AnsiString" Value:""
（2）ParameterName:"@Location" DbType:"AnsiString" Value:"chs"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"10"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:26:13
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:26:13
类型：Business 业务对象：Tool_UpdateDictionary 
说明：执行业务检查：1.0.该字段在相同的本地化、情景中已经存在
***************************************************************************************************************
SQL:
 if @:UpdateFlag='delete'
select 1
else

if exists (
select 1 from tDictionary 
where s_Field=@:Field 
and s_Location=@:Location 
and s_Scene=@:Scene
and n_ID!=@:ID
)
     select 1 where 1=2
else
     select 1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Caption" DbType:"String" Value:"IP地址"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@CommonID" DbType:"String" Value:""
（4）ParameterName:"@Field" DbType:"String" Value:"s_QAProductWarehouseInfo_IPAddress"
（5）ParameterName:"@Format" DbType:"String" Value:""
（6）ParameterName:"@ID" DbType:"AnsiString" Value:"null"
（7）ParameterName:"@Location" DbType:"String" Value:"chs"
（8）ParameterName:"@Scene" DbType:"String" Value:""
（9）ParameterName:"@Sql" DbType:"String" Value:""
（10）ParameterName:"@Type" DbType:"String" Value:""
（11）ParameterName:"@UpdateFlag" DbType:"String" Value:"add"
（12）ParameterName:"@Width" DbType:"String" Value:""
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:26:13
类型：Business 业务对象：Tool_UpdateDictionary 
说明：执行业务过程[1]：0.根据状态更新数据字典
***************************************************************************************************************
SQL:

if @UpdateFlag='add'

insert into tDictionary (
    s_Field,
    s_Scene,
    s_Location,
    s_Caption,
    s_Type,
    s_Format,
    s_CommonID,
    s_Sql,
    s_Width
)values (
    rtrim(@Field),
    rtrim(@Scene),
    @Location,
    @Caption,
    @Type,
    @Format,
    @CommonID,
    @Sql,
    @Width
)
else if @UpdateFlag='update'
update tDictionary set 
    s_Field=rtrim(@Field),
    s_Scene=rtrim(@Scene),
    s_Location=@Location,
    s_Caption=@Caption,
    s_Type=@Type,
    s_Format=@Format,
    s_CommonID=@CommonID,
    s_Sql=@Sql,
    s_Width=@Width
where     n_ID=@ID
else if @UpdateFlag='delete'
delete from tDictionary 
where     n_ID=@ID
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Caption" DbType:"String" Value:"IP地址"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@CommonID" DbType:"String" Value:""
（4）ParameterName:"@Field" DbType:"String" Value:"s_QAProductWarehouseInfo_IPAddress"
（5）ParameterName:"@Format" DbType:"String" Value:""
（6）ParameterName:"@ID" DbType:"AnsiString" Value:""
（7）ParameterName:"@Location" DbType:"String" Value:"chs"
（8）ParameterName:"@Scene" DbType:"String" Value:""
（9）ParameterName:"@Sql" DbType:"String" Value:""
（10）ParameterName:"@Type" DbType:"String" Value:""
（11）ParameterName:"@UpdateFlag" DbType:"String" Value:"add"
（12）ParameterName:"@Width" DbType:"String" Value:""
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:26:14
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:26:14
类型：Query 查询对象：Tool_SelDictionarys 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select * from ( select RowNumber=row_number() over(order by Field desc),* from (
SELECT  
--[Columns]
    ID=n_ID,
    Field=s_Field,
    Scene=s_Scene,
    Location=s_Location,
    Caption=s_Caption,
    Type=s_Type,
    Format=s_Format,
    CommonID=s_CommonID,
    Width=s_Width,
    Sql=s_Sql
--[/Columns]
from tDictionary
where s_Location=case isnull(@Location,'') when '' then s_Location
                                                               else @Location end
and isnull(s_Field,'') like '%'+isnull(@Field,'')+'%'
and isnull(s_Caption,'') like '%'+isnull(@Caption,'') +'%'

) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Field" DbType:"AnsiString" Value:""
（1）ParameterName:"@Caption" DbType:"AnsiString" Value:""
（2）ParameterName:"@Location" DbType:"AnsiString" Value:"chs"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"10"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:26:14
类型：Query 查询对象：Tool_SelDictionarys 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:
 select RowsCount=COUNT(1) from ( 
SELECT  
 R=1 
from tDictionary
where s_Location=case isnull(@Location,'') when '' then s_Location
                                                               else @Location end
and isnull(s_Field,'') like '%'+isnull(@Field,'')+'%'
and isnull(s_Caption,'') like '%'+isnull(@Caption,'') +'%'

 ) T_RowsCount 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Field" DbType:"AnsiString" Value:""
（1）ParameterName:"@Caption" DbType:"AnsiString" Value:""
（2）ParameterName:"@Location" DbType:"AnsiString" Value:"chs"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"10"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:26:51
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:26:51
类型：Business 业务对象：Tool_UpdateDictionary 
说明：执行业务检查：1.0.该字段在相同的本地化、情景中已经存在
***************************************************************************************************************
SQL:
 if @:UpdateFlag='delete'
select 1
else

if exists (
select 1 from tDictionary 
where s_Field=@:Field 
and s_Location=@:Location 
and s_Scene=@:Scene
and n_ID!=@:ID
)
     select 1 where 1=2
else
     select 1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Caption" DbType:"String" Value:"产品分类"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@CommonID" DbType:"String" Value:""
（4）ParameterName:"@Field" DbType:"String" Value:"s_QAProductWarehouseInfo_ProductType"
（5）ParameterName:"@Format" DbType:"String" Value:""
（6）ParameterName:"@ID" DbType:"AnsiString" Value:"null"
（7）ParameterName:"@Location" DbType:"String" Value:"chs"
（8）ParameterName:"@Scene" DbType:"String" Value:""
（9）ParameterName:"@Sql" DbType:"String" Value:""
（10）ParameterName:"@Type" DbType:"String" Value:""
（11）ParameterName:"@UpdateFlag" DbType:"String" Value:"add"
（12）ParameterName:"@Width" DbType:"String" Value:""
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:26:51
类型：Business 业务对象：Tool_UpdateDictionary 
说明：执行业务过程[1]：0.根据状态更新数据字典
***************************************************************************************************************
SQL:

if @UpdateFlag='add'

insert into tDictionary (
    s_Field,
    s_Scene,
    s_Location,
    s_Caption,
    s_Type,
    s_Format,
    s_CommonID,
    s_Sql,
    s_Width
)values (
    rtrim(@Field),
    rtrim(@Scene),
    @Location,
    @Caption,
    @Type,
    @Format,
    @CommonID,
    @Sql,
    @Width
)
else if @UpdateFlag='update'
update tDictionary set 
    s_Field=rtrim(@Field),
    s_Scene=rtrim(@Scene),
    s_Location=@Location,
    s_Caption=@Caption,
    s_Type=@Type,
    s_Format=@Format,
    s_CommonID=@CommonID,
    s_Sql=@Sql,
    s_Width=@Width
where     n_ID=@ID
else if @UpdateFlag='delete'
delete from tDictionary 
where     n_ID=@ID
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Caption" DbType:"String" Value:"产品分类"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@CommonID" DbType:"String" Value:""
（4）ParameterName:"@Field" DbType:"String" Value:"s_QAProductWarehouseInfo_ProductType"
（5）ParameterName:"@Format" DbType:"String" Value:""
（6）ParameterName:"@ID" DbType:"AnsiString" Value:""
（7）ParameterName:"@Location" DbType:"String" Value:"chs"
（8）ParameterName:"@Scene" DbType:"String" Value:""
（9）ParameterName:"@Sql" DbType:"String" Value:""
（10）ParameterName:"@Type" DbType:"String" Value:""
（11）ParameterName:"@UpdateFlag" DbType:"String" Value:"add"
（12）ParameterName:"@Width" DbType:"String" Value:""
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:26:52
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:26:52
类型：Query 查询对象：Tool_SelDictionarys 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select * from ( select RowNumber=row_number() over(order by Field desc),* from (
SELECT  
--[Columns]
    ID=n_ID,
    Field=s_Field,
    Scene=s_Scene,
    Location=s_Location,
    Caption=s_Caption,
    Type=s_Type,
    Format=s_Format,
    CommonID=s_CommonID,
    Width=s_Width,
    Sql=s_Sql
--[/Columns]
from tDictionary
where s_Location=case isnull(@Location,'') when '' then s_Location
                                                               else @Location end
and isnull(s_Field,'') like '%'+isnull(@Field,'')+'%'
and isnull(s_Caption,'') like '%'+isnull(@Caption,'') +'%'

) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Field" DbType:"AnsiString" Value:""
（1）ParameterName:"@Caption" DbType:"AnsiString" Value:""
（2）ParameterName:"@Location" DbType:"AnsiString" Value:"chs"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"10"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:26:52
类型：Query 查询对象：Tool_SelDictionarys 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:
 select RowsCount=COUNT(1) from ( 
SELECT  
 R=1 
from tDictionary
where s_Location=case isnull(@Location,'') when '' then s_Location
                                                               else @Location end
and isnull(s_Field,'') like '%'+isnull(@Field,'')+'%'
and isnull(s_Caption,'') like '%'+isnull(@Caption,'') +'%'

 ) T_RowsCount 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Field" DbType:"AnsiString" Value:""
（1）ParameterName:"@Caption" DbType:"AnsiString" Value:""
（2）ParameterName:"@Location" DbType:"AnsiString" Value:"chs"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"10"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:27:14
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:27:15
类型：Business 业务对象：Tool_UpdateDictionary 
说明：执行业务检查：1.0.该字段在相同的本地化、情景中已经存在
***************************************************************************************************************
SQL:
 if @:UpdateFlag='delete'
select 1
else

if exists (
select 1 from tDictionary 
where s_Field=@:Field 
and s_Location=@:Location 
and s_Scene=@:Scene
and n_ID!=@:ID
)
     select 1 where 1=2
else
     select 1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Caption" DbType:"String" Value:"颜色分类"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@CommonID" DbType:"String" Value:""
（4）ParameterName:"@Field" DbType:"String" Value:"s_QAProductWarehouseInfo_Color"
（5）ParameterName:"@Format" DbType:"String" Value:""
（6）ParameterName:"@ID" DbType:"AnsiString" Value:"null"
（7）ParameterName:"@Location" DbType:"String" Value:"chs"
（8）ParameterName:"@Scene" DbType:"String" Value:""
（9）ParameterName:"@Sql" DbType:"String" Value:""
（10）ParameterName:"@Type" DbType:"String" Value:""
（11）ParameterName:"@UpdateFlag" DbType:"String" Value:"add"
（12）ParameterName:"@Width" DbType:"String" Value:""
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:27:15
类型：Business 业务对象：Tool_UpdateDictionary 
说明：执行业务过程[1]：0.根据状态更新数据字典
***************************************************************************************************************
SQL:

if @UpdateFlag='add'

insert into tDictionary (
    s_Field,
    s_Scene,
    s_Location,
    s_Caption,
    s_Type,
    s_Format,
    s_CommonID,
    s_Sql,
    s_Width
)values (
    rtrim(@Field),
    rtrim(@Scene),
    @Location,
    @Caption,
    @Type,
    @Format,
    @CommonID,
    @Sql,
    @Width
)
else if @UpdateFlag='update'
update tDictionary set 
    s_Field=rtrim(@Field),
    s_Scene=rtrim(@Scene),
    s_Location=@Location,
    s_Caption=@Caption,
    s_Type=@Type,
    s_Format=@Format,
    s_CommonID=@CommonID,
    s_Sql=@Sql,
    s_Width=@Width
where     n_ID=@ID
else if @UpdateFlag='delete'
delete from tDictionary 
where     n_ID=@ID
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Caption" DbType:"String" Value:"颜色分类"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@CommonID" DbType:"String" Value:""
（4）ParameterName:"@Field" DbType:"String" Value:"s_QAProductWarehouseInfo_Color"
（5）ParameterName:"@Format" DbType:"String" Value:""
（6）ParameterName:"@ID" DbType:"AnsiString" Value:""
（7）ParameterName:"@Location" DbType:"String" Value:"chs"
（8）ParameterName:"@Scene" DbType:"String" Value:""
（9）ParameterName:"@Sql" DbType:"String" Value:""
（10）ParameterName:"@Type" DbType:"String" Value:""
（11）ParameterName:"@UpdateFlag" DbType:"String" Value:"add"
（12）ParameterName:"@Width" DbType:"String" Value:""
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:27:16
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:27:16
类型：Query 查询对象：Tool_SelDictionarys 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select * from ( select RowNumber=row_number() over(order by Field desc),* from (
SELECT  
--[Columns]
    ID=n_ID,
    Field=s_Field,
    Scene=s_Scene,
    Location=s_Location,
    Caption=s_Caption,
    Type=s_Type,
    Format=s_Format,
    CommonID=s_CommonID,
    Width=s_Width,
    Sql=s_Sql
--[/Columns]
from tDictionary
where s_Location=case isnull(@Location,'') when '' then s_Location
                                                               else @Location end
and isnull(s_Field,'') like '%'+isnull(@Field,'')+'%'
and isnull(s_Caption,'') like '%'+isnull(@Caption,'') +'%'

) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Field" DbType:"AnsiString" Value:""
（1）ParameterName:"@Caption" DbType:"AnsiString" Value:""
（2）ParameterName:"@Location" DbType:"AnsiString" Value:"chs"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"10"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:27:16
类型：Query 查询对象：Tool_SelDictionarys 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:
 select RowsCount=COUNT(1) from ( 
SELECT  
 R=1 
from tDictionary
where s_Location=case isnull(@Location,'') when '' then s_Location
                                                               else @Location end
and isnull(s_Field,'') like '%'+isnull(@Field,'')+'%'
and isnull(s_Caption,'') like '%'+isnull(@Caption,'') +'%'

 ) T_RowsCount 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Field" DbType:"AnsiString" Value:""
（1）ParameterName:"@Caption" DbType:"AnsiString" Value:""
（2）ParameterName:"@Location" DbType:"AnsiString" Value:"chs"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"10"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:27:29
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:30:40
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:30:40
类型：Query 查询对象：SelDataVersionList 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
SELECT [n_Id]
      ,[s_BizName]
      ,[s_CountSql]
      ,[n_Type]
      ,[b_IsSys]
      ,[s_HiddenFields]
      ,[s_ReadOnly4Adds]
      ,[s_ReadOnly4Edits]
      ,[s_Scenes]
      ,[s_NotNulls]
      ,[FRM_BizRecord].[n_state]
      ,[s_AI]
      ,FRM_Developer.s_UserName as [s_Creator]
      ,[s_Remark]
      ,Convert(varchar(20),[FRM_BizRecord].[d_CreateTime],120) as [d_CreateTime]
  FROM [TopsWMS_FRM].[dbo].[FRM_BizRecord] [FRM_BizRecord] with(nolock)
  inner join [TopsWMS_FRM].[dbo].FRM_Developer FRM_Developer with(nolock) on FRM_Developer.s_UserNO = [FRM_BizRecord].s_Creator
where s_BizName = (case isnull(@bizName,'') when '' then s_BizName else @bizName end)
order by [FRM_BizRecord].d_CreateTime desc
 



^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@bizName" DbType:"AnsiString" Value:"AddQAProductWarehouseInfo"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:33:27
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:33:27
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:33:27
类型：Business 业务对象：AddQAProductWarehouseInfo 
说明：执行业务检查：1.*.该储位码在仓库中不存在，请重新确认
***************************************************************************************************************
SQL:
 if exists(select 1 from tSpace with(nolock)
 where s_Space_BarCode = @:n_QAProductWarehouseInfo_Space_Id
and n_Warehouse_Id = @:n_QAProductWarehouseInfo_Warehouse_Id
 and n_Space_state = 1)
 begin

 select 1

 end
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_Warehouse_Id" DbType:"AnsiString" Value:"B2709B9A-06C1-4A3E-99DB-A56692B4D0A7"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"2"
（4）ParameterName:"@n_QAProductWarehouseInfo_QualityStatus" DbType:"AnsiString" Value:"0"
（5）ParameterName:"@n_QAProductWarehouseInfo_Space_Id" DbType:"AnsiString" Value:"1"
（6）ParameterName:"@n_QAProductWarehouseInfo_OpeType" DbType:"AnsiString" Value:"1"
（7）ParameterName:"@s_QAProductWarehouseInfo_IPAddress" DbType:"AnsiString" Value:"1"
（8）ParameterName:"@s_QAProductWarehouseInfo_ProductType" DbType:"AnsiString" Value:"1"
（9）ParameterName:"@s_QAProductWarehouseInfo_Color" DbType:"AnsiString" Value:"1"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:33:37
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:33:37
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:33:37
类型：Business 业务对象：AddQAProductWarehouseInfo 
说明：执行业务检查：1.*.该储位码在仓库中不存在，请重新确认
***************************************************************************************************************
SQL:
 if exists(select 1 from tSpace with(nolock)
 where s_Space_BarCode = @:n_QAProductWarehouseInfo_Space_Id
and n_Warehouse_Id = @:n_QAProductWarehouseInfo_Warehouse_Id
 and n_Space_state = 1)
 begin

 select 1

 end
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_Warehouse_Id" DbType:"AnsiString" Value:"B2709B9A-06C1-4A3E-99DB-A56692B4D0A7"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"2"
（4）ParameterName:"@n_QAProductWarehouseInfo_QualityStatus" DbType:"AnsiString" Value:"0"
（5）ParameterName:"@n_QAProductWarehouseInfo_Space_Id" DbType:"AnsiString" Value:"DB010101"
（6）ParameterName:"@n_QAProductWarehouseInfo_OpeType" DbType:"AnsiString" Value:"1"
（7）ParameterName:"@s_QAProductWarehouseInfo_IPAddress" DbType:"AnsiString" Value:"1"
（8）ParameterName:"@s_QAProductWarehouseInfo_ProductType" DbType:"AnsiString" Value:"1"
（9）ParameterName:"@s_QAProductWarehouseInfo_Color" DbType:"AnsiString" Value:"1"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:33:47
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:33:50
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:33:50
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:33:50
类型：Query 查询对象：SelWarehouseList 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select * from ( select RowNumber=row_number() over(order by n_Warehouse_Id asc),* from (
SELECT 
--[Columns]      
      [n_Warehouse_Id]
      ,tBlock.s_Block_Name
      ,tShopfloor.s_Shopfloor_Name
      ,[s_Warehouse_Name]
      ,[s_Warehouse_Code]
      ,[s_Warehouse_Address]
      ,[s_Warehouse_Phone]
      ,[s_Warehouse_Purpose]
      ,(case isnull(s_Warehouse_LocationLock,'') when '' then '未锁定' else s_Warehouse_LocationLock end ) as s_Warehouse_LocationLock 
	  ,(case isnull(s_Warehouse_ShelfForm,'2') when '1' then '单件录入' when '2' then '批量录入' else '' end) as s_Warehouse_ShelfForm
	  ,s_Warehouse_QCStatusShelfLimit
      ,[s_Warehouse_Remark]
      ,[s_Warehouse_StorageType] 
      ,[s_Warehouse_CustomFields1]
      ,[s_Warehouse_CustomFields2]
      ,[s_Warehouse_CustomFields3]
      ,[s_Warehouse_CustomFields4]
      ,[s_Warehouse_CustomFields5]
      ,[s_Warehouse_CustomFields6]
      ,[s_Warehouse_CustomFields7]
      ,[s_Warehouse_CustomFields8]
      ,[s_Warehouse_CustomFields9]
      ,[s_Warehouse_CustomFields10]
      ,[n_Warehouse_state]=(case n_Warehouse_state when 1 then '正常' else '停用' end)
      ,[s_Warehouse_Creator]
      ,[d_Warehouse_CreateTime]
      ,[s_Warehouse_Updator]
      ,[d_Warehouse_UpdateTime]
--[/Columns]     
  FROM [dbo].[tWarehouse] [tWarehouse] with(nolock)
left join tShopfloor tShopfloor with(nolock) on tShopfloor.n_Shopfloor_Id = [tWarehouse].n_Shopfloor_Id
left join tBlock tBlock with(nolock) on tBlock.n_Block_Id = tWarehouse.n_Block_Id
where isnull(s_Block_Name,'') like (case when isnull('','') = '' then isnull(s_Block_Name,'') else '%'+''+'%' end)
and isnull(s_Shopfloor_Name,'') like (case when isnull('','') = '' then isnull(s_Shopfloor_Name,'') else '%'+''+'%' end)
and s_Warehouse_Name like (case when isnull(@Warehouse_Name,'') = '' then s_Warehouse_Name else '%'+@Warehouse_Name+'%' end)
and s_Warehouse_Code like (case when isnull(@Warehouse_Code,'') = '' then s_Warehouse_Code else '%'+@Warehouse_Code+'%' end)
and n_Warehouse_state = (case when isnull(@Warehouse_state,0) = 0 then n_Warehouse_state else @Warehouse_state end)
) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex  


^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Block_Name" DbType:"AnsiString" Value:""
（1）ParameterName:"@Shopfloor_Name" DbType:"AnsiString" Value:""
（2）ParameterName:"@Warehouse_Name" DbType:"AnsiString" Value:""
（3）ParameterName:"@Warehouse_Code" DbType:"AnsiString" Value:""
（4）ParameterName:"@Warehouse_state" DbType:"Int32" Value:"1"
（5）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（6）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（7）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（8）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:33:50
类型：Query 查询对象：SelWarehouseList 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:
 select RowsCount=COUNT(1) from ( 
SELECT 
 R=1      
  FROM [dbo].[tWarehouse] [tWarehouse] with(nolock)
left join tShopfloor tShopfloor with(nolock) on tShopfloor.n_Shopfloor_Id = [tWarehouse].n_Shopfloor_Id
left join tBlock tBlock with(nolock) on tBlock.n_Block_Id = tWarehouse.n_Block_Id
where isnull(s_Block_Name,'') like (case when isnull('','') = '' then isnull(s_Block_Name,'') else '%'+''+'%' end)
and isnull(s_Shopfloor_Name,'') like (case when isnull('','') = '' then isnull(s_Shopfloor_Name,'') else '%'+''+'%' end)
and s_Warehouse_Name like (case when isnull(@Warehouse_Name,'') = '' then s_Warehouse_Name else '%'+@Warehouse_Name+'%' end)
and s_Warehouse_Code like (case when isnull(@Warehouse_Code,'') = '' then s_Warehouse_Code else '%'+@Warehouse_Code+'%' end)
and n_Warehouse_state = (case when isnull(@Warehouse_state,0) = 0 then n_Warehouse_state else @Warehouse_state end)
 ) T_RowsCount  


^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Block_Name" DbType:"AnsiString" Value:""
（1）ParameterName:"@Shopfloor_Name" DbType:"AnsiString" Value:""
（2）ParameterName:"@Warehouse_Name" DbType:"AnsiString" Value:""
（3）ParameterName:"@Warehouse_Code" DbType:"AnsiString" Value:""
（4）ParameterName:"@Warehouse_state" DbType:"Int32" Value:"1"
（5）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（6）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（7）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（8）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:33:59
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:33:59
类型：Query 查询对象：SelSessionState 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select top 1 LoginState = 
(case when 
DATEDIFF(MINUTE,tSessionStateRecord.d_LoginTime,GETDATE())
< tSessionStateRecord.n_HoldingTime then 0 else 1 end),
UserNO = tSessionStateRecord.s_UserNO,
UserName = tUser.s_UserName
 from tSessionStateRecord tSessionStateRecord with(nolock)
 left join tUser tUser with(nolock) on tSessionStateRecord.s_UserNO = tUser.s_UserNO
where tSessionStateRecord.s_IPAddress = @IPAddress 
and tSessionStateRecord.s_UserAgent = @UserAgent
and tSessionStateRecord.s_UserNO <> ''
and tUser.n_state = 1
order by tSessionStateRecord.d_LoginTime desc
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@IPAddress" DbType:"AnsiString" Value:"::1"
（1）ParameterName:"@UserAgent" DbType:"AnsiString" Value:"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:34:02
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:34:03
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:34:03
类型：Query 查询对象：SelRackList 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select * from ( select RowNumber=row_number() over(order by s_Rack_Code asc),* from (
SELECT 
--[Columns]
      n_Rack_Id
      ,[s_Block_Name]
      ,[s_Warehouse_Name]
      ,[s_Rack_StorageType]
      ,s_Rack_CodePrefix
      ,[s_Rack_Code]
      ,[n_Rack_SpaceCapacity]
      ,[n_Rack_LayerCapacity] 
      ,[n_Rack_MaximumStorageCapacity]
      ,(case isnull(s_Rack_LocationLock,'') when '' then '未锁定' else s_Rack_LocationLock end ) as s_Rack_LocationLock 
	   
	  ,[n_Rack_QualityLevel]=
      (case isnull([n_Rack_QualityLevel],-1) when -1 then '' when 1 then '合格' when 2 then '报废' when 3 then '打磨' when 4 then '待判定' else '' end) 
      ,[f_Rack_Width]
      ,[f_Rack_Height]
      ,[f_Rack_Length]
      ,(case isnull([n_Rack_UsageStatus],3) when 1 then '已占用' when 2 then '未完全占用' else '空闲' end) as n_Rack_UsageStatus 
	  ,[s_Rack_CustomFields1]
      ,[s_Rack_CustomFields2]
      ,[s_Rack_CustomFields3]
      ,[s_Rack_CustomFields4]
      ,[s_Rack_CustomFields5]
      ,[s_Rack_CustomFields6]
      ,[s_Rack_CustomFields7]
      ,[s_Rack_CustomFields8]
      ,[s_Rack_CustomFields9]
      ,[s_Rack_CustomFields10]
      ,[n_Rack_state]=(case n_Rack_state when 1 then '正常' else '停用' end)
      ,[s_Rack_Creator]
      ,[d_Rack_CreateTime]
      ,[s_Rack_Updator]
      ,[d_Rack_UpdateTime]
--[/Columns]
  FROM [dbo].[tRack] with(nolock)
where [s_Rack_Code] like (case when isnull(@Rack_Code,'') = '' then [s_Rack_Code] else '%'+@Rack_Code+'%' end)
and n_Rack_state = (case when isnull(@Rack_state,0) = 0 then n_Rack_state else @Rack_state end)
and n_Warehouse_Id = @n_Warehouse_Id
) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Rack_Code" DbType:"AnsiString" Value:""
（1）ParameterName:"@Rack_state" DbType:"Int32" Value:"1"
（2）ParameterName:"@n_Warehouse_Id" DbType:"AnsiString" Value:"3343AE8F-3C37-4991-98C9-2B1E008418F4"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:34:03
类型：Query 查询对象：SelRackList 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:
 select RowsCount=COUNT(1) from ( 
SELECT 
 R=1 
  FROM [dbo].[tRack] with(nolock)
where [s_Rack_Code] like (case when isnull(@Rack_Code,'') = '' then [s_Rack_Code] else '%'+@Rack_Code+'%' end)
and n_Rack_state = (case when isnull(@Rack_state,0) = 0 then n_Rack_state else @Rack_state end)
and n_Warehouse_Id = @n_Warehouse_Id
 ) T_RowsCount 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Rack_Code" DbType:"AnsiString" Value:""
（1）ParameterName:"@Rack_state" DbType:"Int32" Value:"1"
（2）ParameterName:"@n_Warehouse_Id" DbType:"AnsiString" Value:"3343AE8F-3C37-4991-98C9-2B1E008418F4"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:03
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:03
类型：Query 查询对象：SelSessionState 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select top 1 LoginState = 
(case when 
DATEDIFF(MINUTE,tSessionStateRecord.d_LoginTime,GETDATE())
< tSessionStateRecord.n_HoldingTime then 0 else 1 end),
UserNO = tSessionStateRecord.s_UserNO,
UserName = tUser.s_UserName
 from tSessionStateRecord tSessionStateRecord with(nolock)
 left join tUser tUser with(nolock) on tSessionStateRecord.s_UserNO = tUser.s_UserNO
where tSessionStateRecord.s_IPAddress = @IPAddress 
and tSessionStateRecord.s_UserAgent = @UserAgent
and tSessionStateRecord.s_UserNO <> ''
and tUser.n_state = 1
order by tSessionStateRecord.d_LoginTime desc
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@IPAddress" DbType:"AnsiString" Value:"::1"
（1）ParameterName:"@UserAgent" DbType:"AnsiString" Value:"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:07
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:07
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:07
类型：Query 查询对象：SelSpaceList 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select * from ( select RowNumber=row_number() over(order by s_Space_BarCode asc),* from (
SELECT 
--[Columns]
      [tSpace].[n_Space_Id]
      ,[tSpace].[n_CombinedSpace_Id]  
      ,n_SplitSpace_Id
      ,(case when ISNULL(tCombinedSpace.n_CombinedSpace_Id,'') = '' then 0 else 1 end) as n_CombinedSpace_State
      ,tWarehouse.s_Warehouse_Name
      ,tRack.s_Rack_Code
      ,[s_Space_Code]
      ,[s_Space_BarCode]
      ,[n_Space_BayNumber]
      ,[n_Space_LayerNumber] 
      ,[n_Space_Position]
      ,[n_Space_MaxPosition]
      ,[s_Space_StorageType]
      ,(case isnull(s_Space_LocationLock,'') when '' then '未锁定' else s_Space_LocationLock end ) as [s_Space_LocationLock]
      ,(case isnull(s_Space_IsVirtualLocation,'') when '' then '否' else s_Space_IsVirtualLocation end ) as s_Space_IsVirtualLocation
	  ,[n_Space_Warehouse]
      ,[n_Space_Width]
      ,[n_Space_Height]
      ,[n_Space_Length]
      ,[n_Space_ShipmentSequence]
      ,[n_Space_QualityLevel]=
      (case isnull([n_Space_QualityLevel],-1) when -1 then '' when 1 then '合格' when 2 then '报废' when 3 then '打磨' when 4 then '待判定' else '' end) 
      ,[n_Space_UsageStatus]=(case n_Space_UsageStatus when 1 then '已占用' when 2 then '未完全占用' else '空闲' end) 
      ,[s_Space_OverflowLocation]
      ,[n_Space_RestrictedStorageMaterialType]
      ,[s_Space_CustomFields1]
      ,[s_Space_CustomFields2]
      ,[s_Space_CustomFields3]
      ,[s_Space_CustomFields4]
      ,[s_Space_CustomFields5]
      ,[s_Space_CustomFields6]
      ,[s_Space_CustomFields7]
      ,[s_Space_CustomFields8]
      ,[s_Space_CustomFields9]
      ,[s_Space_CustomFields10]
      ,[n_Space_state]=(case n_Space_state when 1 then '正常' else '停用' end)
      ,[s_Space_Creator]
      ,[d_Space_CreateTime]
      ,[s_Space_Updator]
      ,[d_Space_UpdateTime]
--[/Columns]
  FROM [dbo].[tSpace] with(nolock)
left join tRack tRack with(nolock) on tRack.n_Rack_Id = tSpace.n_Rack_Id
left join tWarehouse tWarehouse with(nolock) on tWarehouse.n_Warehouse_Id = tSpace.n_Warehouse_Id
left join tCombinedSpace tCombinedSpace with(nolock) on tCombinedSpace.n_Space_Id = tSpace.n_Space_Id
and tCombinedSpace.n_CombinedSpace_state = 1
where tSpace.n_Rack_Id = @n_Rack_Id
and n_Space_BayNumber = (case when isnull(@Space_BayNumber,'') = '' then n_Space_BayNumber else @Space_BayNumber end) 
and [n_Space_LayerNumber] = (case when isnull(@Space_LayerNumber,'') = '' then [n_Space_LayerNumber] else @Space_LayerNumber end) 
and isnull([s_Space_BarCode],'') like (case when isnull(@Space_BarCode,'') = '' then isnull(s_Space_BarCode,'') else '%'+@Space_BarCode+'%' end) 
and n_Space_state = (case when isnull(@Space_state,0) = 0 then n_Space_state else @Space_state end)
) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 

 

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_Rack_Id" DbType:"AnsiString" Value:"3384B5AA-E412-48E9-84E6-3C8ED08CD683"
（1）ParameterName:"@Space_BayNumber" DbType:"AnsiString" Value:""
（2）ParameterName:"@Space_LayerNumber" DbType:"AnsiString" Value:""
（3）ParameterName:"@Space_BarCode" DbType:"AnsiString" Value:""
（4）ParameterName:"@Space_state" DbType:"Int32" Value:"1"
（5）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（6）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（7）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（8）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:07
类型：Query 查询对象：SelSpaceList 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:
 select RowsCount=COUNT(1) from ( 
SELECT 
 R=1 
  FROM [dbo].[tSpace] with(nolock)
left join tRack tRack with(nolock) on tRack.n_Rack_Id = tSpace.n_Rack_Id
left join tWarehouse tWarehouse with(nolock) on tWarehouse.n_Warehouse_Id = tSpace.n_Warehouse_Id
left join tCombinedSpace tCombinedSpace with(nolock) on tCombinedSpace.n_Space_Id = tSpace.n_Space_Id
and tCombinedSpace.n_CombinedSpace_state = 1
where tSpace.n_Rack_Id = @n_Rack_Id
and n_Space_BayNumber = (case when isnull(@Space_BayNumber,'') = '' then n_Space_BayNumber else @Space_BayNumber end) 
and [n_Space_LayerNumber] = (case when isnull(@Space_LayerNumber,'') = '' then [n_Space_LayerNumber] else @Space_LayerNumber end) 
and isnull([s_Space_BarCode],'') like (case when isnull(@Space_BarCode,'') = '' then isnull(s_Space_BarCode,'') else '%'+@Space_BarCode+'%' end) 
and n_Space_state = (case when isnull(@Space_state,0) = 0 then n_Space_state else @Space_state end)
 ) T_RowsCount 

 

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_Rack_Id" DbType:"AnsiString" Value:"3384B5AA-E412-48E9-84E6-3C8ED08CD683"
（1）ParameterName:"@Space_BayNumber" DbType:"AnsiString" Value:""
（2）ParameterName:"@Space_LayerNumber" DbType:"AnsiString" Value:""
（3）ParameterName:"@Space_BarCode" DbType:"AnsiString" Value:""
（4）ParameterName:"@Space_state" DbType:"Int32" Value:"1"
（5）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（6）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（7）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（8）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:11
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:12
类型：Query 查询对象：SelSessionState 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select top 1 LoginState = 
(case when 
DATEDIFF(MINUTE,tSessionStateRecord.d_LoginTime,GETDATE())
< tSessionStateRecord.n_HoldingTime then 0 else 1 end),
UserNO = tSessionStateRecord.s_UserNO,
UserName = tUser.s_UserName
 from tSessionStateRecord tSessionStateRecord with(nolock)
 left join tUser tUser with(nolock) on tSessionStateRecord.s_UserNO = tUser.s_UserNO
where tSessionStateRecord.s_IPAddress = @IPAddress 
and tSessionStateRecord.s_UserAgent = @UserAgent
and tSessionStateRecord.s_UserNO <> ''
and tUser.n_state = 1
order by tSessionStateRecord.d_LoginTime desc
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@IPAddress" DbType:"AnsiString" Value:"::1"
（1）ParameterName:"@UserAgent" DbType:"AnsiString" Value:"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:15
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:15
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:15
类型：Query 查询对象：SelSpaceList 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select * from ( select RowNumber=row_number() over(order by s_Space_BarCode asc),* from (
SELECT 
--[Columns]
      [tSpace].[n_Space_Id]
      ,[tSpace].[n_CombinedSpace_Id]  
      ,n_SplitSpace_Id
      ,(case when ISNULL(tCombinedSpace.n_CombinedSpace_Id,'') = '' then 0 else 1 end) as n_CombinedSpace_State
      ,tWarehouse.s_Warehouse_Name
      ,tRack.s_Rack_Code
      ,[s_Space_Code]
      ,[s_Space_BarCode]
      ,[n_Space_BayNumber]
      ,[n_Space_LayerNumber] 
      ,[n_Space_Position]
      ,[n_Space_MaxPosition]
      ,[s_Space_StorageType]
      ,(case isnull(s_Space_LocationLock,'') when '' then '未锁定' else s_Space_LocationLock end ) as [s_Space_LocationLock]
      ,(case isnull(s_Space_IsVirtualLocation,'') when '' then '否' else s_Space_IsVirtualLocation end ) as s_Space_IsVirtualLocation
	  ,[n_Space_Warehouse]
      ,[n_Space_Width]
      ,[n_Space_Height]
      ,[n_Space_Length]
      ,[n_Space_ShipmentSequence]
      ,[n_Space_QualityLevel]=
      (case isnull([n_Space_QualityLevel],-1) when -1 then '' when 1 then '合格' when 2 then '报废' when 3 then '打磨' when 4 then '待判定' else '' end) 
      ,[n_Space_UsageStatus]=(case n_Space_UsageStatus when 1 then '已占用' when 2 then '未完全占用' else '空闲' end) 
      ,[s_Space_OverflowLocation]
      ,[n_Space_RestrictedStorageMaterialType]
      ,[s_Space_CustomFields1]
      ,[s_Space_CustomFields2]
      ,[s_Space_CustomFields3]
      ,[s_Space_CustomFields4]
      ,[s_Space_CustomFields5]
      ,[s_Space_CustomFields6]
      ,[s_Space_CustomFields7]
      ,[s_Space_CustomFields8]
      ,[s_Space_CustomFields9]
      ,[s_Space_CustomFields10]
      ,[n_Space_state]=(case n_Space_state when 1 then '正常' else '停用' end)
      ,[s_Space_Creator]
      ,[d_Space_CreateTime]
      ,[s_Space_Updator]
      ,[d_Space_UpdateTime]
--[/Columns]
  FROM [dbo].[tSpace] with(nolock)
left join tRack tRack with(nolock) on tRack.n_Rack_Id = tSpace.n_Rack_Id
left join tWarehouse tWarehouse with(nolock) on tWarehouse.n_Warehouse_Id = tSpace.n_Warehouse_Id
left join tCombinedSpace tCombinedSpace with(nolock) on tCombinedSpace.n_Space_Id = tSpace.n_Space_Id
and tCombinedSpace.n_CombinedSpace_state = 1
where tSpace.n_Rack_Id = @n_Rack_Id
and n_Space_BayNumber = (case when isnull(@Space_BayNumber,'') = '' then n_Space_BayNumber else @Space_BayNumber end) 
and [n_Space_LayerNumber] = (case when isnull(@Space_LayerNumber,'') = '' then [n_Space_LayerNumber] else @Space_LayerNumber end) 
and isnull([s_Space_BarCode],'') like (case when isnull(@Space_BarCode,'') = '' then isnull(s_Space_BarCode,'') else '%'+@Space_BarCode+'%' end) 
and n_Space_state = (case when isnull(@Space_state,0) = 0 then n_Space_state else @Space_state end)
) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 

 

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_Rack_Id" DbType:"AnsiString" Value:"8102D9AF-F690-422D-B452-CD2FEB56541C"
（1）ParameterName:"@Space_BayNumber" DbType:"AnsiString" Value:""
（2）ParameterName:"@Space_LayerNumber" DbType:"AnsiString" Value:""
（3）ParameterName:"@Space_BarCode" DbType:"AnsiString" Value:""
（4）ParameterName:"@Space_state" DbType:"Int32" Value:"1"
（5）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（6）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（7）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（8）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:16
类型：Query 查询对象：SelSpaceList 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:
 select RowsCount=COUNT(1) from ( 
SELECT 
 R=1 
  FROM [dbo].[tSpace] with(nolock)
left join tRack tRack with(nolock) on tRack.n_Rack_Id = tSpace.n_Rack_Id
left join tWarehouse tWarehouse with(nolock) on tWarehouse.n_Warehouse_Id = tSpace.n_Warehouse_Id
left join tCombinedSpace tCombinedSpace with(nolock) on tCombinedSpace.n_Space_Id = tSpace.n_Space_Id
and tCombinedSpace.n_CombinedSpace_state = 1
where tSpace.n_Rack_Id = @n_Rack_Id
and n_Space_BayNumber = (case when isnull(@Space_BayNumber,'') = '' then n_Space_BayNumber else @Space_BayNumber end) 
and [n_Space_LayerNumber] = (case when isnull(@Space_LayerNumber,'') = '' then [n_Space_LayerNumber] else @Space_LayerNumber end) 
and isnull([s_Space_BarCode],'') like (case when isnull(@Space_BarCode,'') = '' then isnull(s_Space_BarCode,'') else '%'+@Space_BarCode+'%' end) 
and n_Space_state = (case when isnull(@Space_state,0) = 0 then n_Space_state else @Space_state end)
 ) T_RowsCount 

 

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_Rack_Id" DbType:"AnsiString" Value:"8102D9AF-F690-422D-B452-CD2FEB56541C"
（1）ParameterName:"@Space_BayNumber" DbType:"AnsiString" Value:""
（2）ParameterName:"@Space_LayerNumber" DbType:"AnsiString" Value:""
（3）ParameterName:"@Space_BarCode" DbType:"AnsiString" Value:""
（4）ParameterName:"@Space_state" DbType:"Int32" Value:"1"
（5）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（6）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（7）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（8）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:24
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:24
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:24
类型：Business 业务对象：AddQAProductWarehouseInfo 
说明：执行业务检查：1.*.该储位码在仓库中不存在，请重新确认
***************************************************************************************************************
SQL:
 if exists(select 1 from tSpace with(nolock)
 where s_Space_BarCode = @:n_QAProductWarehouseInfo_Space_Id
and n_Warehouse_Id = @:n_QAProductWarehouseInfo_Warehouse_Id
 and n_Space_state = 1)
 begin

 select 1

 end
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_Warehouse_Id" DbType:"AnsiString" Value:"3343AE8F-3C37-4991-98C9-2B1E008418F4"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"2"
（4）ParameterName:"@n_QAProductWarehouseInfo_QualityStatus" DbType:"AnsiString" Value:"0"
（5）ParameterName:"@n_QAProductWarehouseInfo_Space_Id" DbType:"AnsiString" Value:"E150401"
（6）ParameterName:"@n_QAProductWarehouseInfo_OpeType" DbType:"AnsiString" Value:"1"
（7）ParameterName:"@s_QAProductWarehouseInfo_IPAddress" DbType:"AnsiString" Value:"1"
（8）ParameterName:"@s_QAProductWarehouseInfo_ProductType" DbType:"AnsiString" Value:"1"
（9）ParameterName:"@s_QAProductWarehouseInfo_Color" DbType:"AnsiString" Value:"1"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:24
类型：Business 业务对象：AddQAProductWarehouseInfo 
说明：执行业务检查：2.*.系统已存在该采集功能的数据，请重新确认
***************************************************************************************************************
SQL:

  if not exists(select 1 from tQAProductWarehouseInfo with(nolock)
 where n_QAProductWarehouseInfo_QAFunction = @:n_QAProductWarehouseInfo_QAFunction
 and n_QAProductWarehouseInfo_QualityStatus = @:n_QAProductWarehouseInfo_QualityStatus
 and n_QAProductWarehouseInfo_OpeType = @:n_QAProductWarehouseInfo_OpeType
 and n_QAProductWarehouseInfo_state = 1)
 begin

 select 1

 end
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_Warehouse_Id" DbType:"AnsiString" Value:"3343AE8F-3C37-4991-98C9-2B1E008418F4"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"2"
（4）ParameterName:"@n_QAProductWarehouseInfo_QualityStatus" DbType:"AnsiString" Value:"0"
（5）ParameterName:"@n_QAProductWarehouseInfo_Space_Id" DbType:"AnsiString" Value:"E150401"
（6）ParameterName:"@n_QAProductWarehouseInfo_OpeType" DbType:"AnsiString" Value:"1"
（7）ParameterName:"@s_QAProductWarehouseInfo_IPAddress" DbType:"AnsiString" Value:"1"
（8）ParameterName:"@s_QAProductWarehouseInfo_ProductType" DbType:"AnsiString" Value:"1"
（9）ParameterName:"@s_QAProductWarehouseInfo_Color" DbType:"AnsiString" Value:"1"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:24
类型：Business 业务对象：AddQAProductWarehouseInfo 
说明：执行业务过程[1]：0.新增QA功能对应的仓库信息
***************************************************************************************************************
SQL:
declare @s_Warehouse_Name varchar(max)
select top 1
@s_Warehouse_Name = s_Warehouse_Name
from tWarehouse with(nolock)
where n_Warehouse_Id = @n_QAProductWarehouseInfo_Warehouse_Id

declare @n_Space_Id varchar(max)
select top 1
@n_Space_Id = n_Space_Id
from tSpace with(nolock)
where s_Space_BarCode = @n_QAProductWarehouseInfo_Space_Id


insert into tQAProductWarehouseInfo (
    n_QAProductWarehouseInfo_Id,
    n_QAProductWarehouseInfo_QAFunction,
    s_QAProductWarehouseInfo_IPAddress,
    s_QAProductWarehouseInfo_ProductType,
    s_QAProductWarehouseInfo_Color,
    n_QAProductWarehouseInfo_QualityStatus,
    n_Warehosue_Id,
    s_Warehouse_Name, 
	n_Space_Id,
	s_Space_BarCode,
    n_QAProductWarehouseInfo_OpeType,
    n_QAProductWarehouseInfo_state,
    s_QAProductWarehouseInfo_Creator,
    s_QAProductWarehouseInfo_Creatime,
    s_QAProductWarehouseInfo_Updator,
    s_QAProductWarehouseInfo_Updatime
)values (
    NEWID(),
    @n_QAProductWarehouseInfo_QAFunction,
    @s_QAProductWarehouseInfo_IPAddress,
    @s_QAProductWarehouseInfo_ProductType,
    @s_QAProductWarehouseInfo_Color,
    @n_QAProductWarehouseInfo_QualityStatus,
    @n_QAProductWarehouseInfo_Warehouse_Id,
    @s_Warehouse_Name, 
	@n_Space_Id,
	@n_QAProductWarehouseInfo_Space_Id,  
    @n_QAProductWarehouseInfo_OpeType,
    1,
    @Operator,
    getdate(),
    @Operator,
    getdate()
)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_Warehouse_Id" DbType:"AnsiString" Value:"3343AE8F-3C37-4991-98C9-2B1E008418F4"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"2"
（4）ParameterName:"@n_QAProductWarehouseInfo_QualityStatus" DbType:"AnsiString" Value:"0"
（5）ParameterName:"@n_QAProductWarehouseInfo_Space_Id" DbType:"AnsiString" Value:"E150401"
（6）ParameterName:"@n_QAProductWarehouseInfo_OpeType" DbType:"AnsiString" Value:"1"
（7）ParameterName:"@s_QAProductWarehouseInfo_IPAddress" DbType:"AnsiString" Value:"1"
（8）ParameterName:"@s_QAProductWarehouseInfo_ProductType" DbType:"AnsiString" Value:"1"
（9）ParameterName:"@s_QAProductWarehouseInfo_Color" DbType:"AnsiString" Value:"1"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:25
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:25
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:25
类型：Query 查询对象：SelQAProductWarehouseInfoList 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:

select * from ( select RowNumber=row_number() over(order by 采集功能 asc),* from (
select 
--[Columns]
n_QAProductWarehouseInfo_Id,
    (case n_QAProductWarehouseInfo_QAFunction when 1 then '大东1楼QA'
    when 2 then '大东3楼QA'
	when 3 then '大东3楼预检'
	when 4 then '大东1楼终检' 
	when 5 then '高科立体库'
        when 6 then '大东1楼预检' else '' end) as '采集功能',
	s_QAProductWarehouseInfo_IPAddress as 'IP地址',
	s_QAProductWarehouseInfo_ProductType as '产品分类',
	s_QAProductWarehouseInfo_Color as '颜色分类',
    (case n_QAProductWarehouseInfo_QualityStatus when 0 then '未检验'
    when 1 then '合格'
    when 2 then '待定'
    when 3 then '报废'
    when 4 then '返工'
    when 5 then '待退' else '' end) as '质量状态',
	(case n_QAProductWarehouseInfo_OpeType when 1 then '入库' else '出库' end) as '操作类型',
    n_Warehosue_Id,
    s_Warehouse_Name as '对应自动出入库的仓库名称', 
    s_Space_BarCode as '对应自动出入库的储位码',
    n_QAProductWarehouseInfo_state
--[/Columns]
from tQAProductWarehouseInfo with(nolock)
where n_QAProductWarehouseInfo_state = 1
and n_QAProductWarehouseInfo_QAFunction = (
case ISNULL(@n_QAProductWarehouseInfo_QAFunction,0) when 0
then n_QAProductWarehouseInfo_QAFunction else @n_QAProductWarehouseInfo_QAFunction end
)
and n_Warehosue_Id = (
case ISNULL(@n_Warehosue_Id,'0') when '0'
then n_Warehosue_Id else @n_Warehosue_Id end
)
) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 

 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"0"
（1）ParameterName:"@n_Warehosue_Id" DbType:"AnsiString" Value:"0"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（3）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（4）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（5）ParameterName:"@endIndex" DbType:"Int32" Value:"20"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:26
类型：Query 查询对象：SelQAProductWarehouseInfoList 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:

 select RowsCount=COUNT(1) from ( 
select 
 R=1 
from tQAProductWarehouseInfo with(nolock)
where n_QAProductWarehouseInfo_state = 1
and n_QAProductWarehouseInfo_QAFunction = (
case ISNULL(@n_QAProductWarehouseInfo_QAFunction,0) when 0
then n_QAProductWarehouseInfo_QAFunction else @n_QAProductWarehouseInfo_QAFunction end
)
and n_Warehosue_Id = (
case ISNULL(@n_Warehosue_Id,'0') when '0'
then n_Warehosue_Id else @n_Warehosue_Id end
)
 ) T_RowsCount 

 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"0"
（1）ParameterName:"@n_Warehosue_Id" DbType:"AnsiString" Value:"0"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（3）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（4）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（5）ParameterName:"@endIndex" DbType:"Int32" Value:"20"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:32
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:34
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:35
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:35
类型：Query 查询对象：SelQAProductWarehouseInfo 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select 
n_QAProductWarehouseInfo_Id,
    n_QAProductWarehouseInfo_QAFunction,
    s_QAProductWarehouseInfo_IPAddress,
    s_QAProductWarehouseInfo_ProductType,
    s_QAProductWarehouseInfo_Color,
    n_QAProductWarehouseInfo_QualityStatus,
    n_Warehosue_Id as n_QAProductWarehouseInfo_Warehouse_Id,
    s_Warehouse_Name, 
	s_Space_BarCode as n_QAProductWarehouseInfo_Space_Id, 
n_QAProductWarehouseInfo_OpeType,
    n_QAProductWarehouseInfo_state  
from tQAProductWarehouseInfo with(nolock)
where n_QAProductWarehouseInfo_Id = @n_QAProductWarehouseInfo_Id
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_Id" DbType:"AnsiString" Value:"33297796-32FC-4EB3-8FA9-C47A4AE5AA99"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:37
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:37
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:37
类型：Business 业务对象：UpdateQAProductWarehouseInfo 
说明：执行业务检查：1.*.该储位码在仓库中不存在，请重新确认
***************************************************************************************************************
SQL:
 if exists(select 1 from tSpace with(nolock)
 where s_Space_BarCode = @:n_QAProductWarehouseInfo_Space_Id
and n_Warehouse_Id = @:n_QAProductWarehouseInfo_Warehouse_Id
 and n_Space_state = 1)
 begin

 select 1

 end
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_Space_Id" DbType:"AnsiString" Value:"E150401"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@n_QAProductWarehouseInfo_OpeType" DbType:"AnsiString" Value:"1"
（4）ParameterName:"@s_QAProductWarehouseInfo_IPAddress" DbType:"AnsiString" Value:"1"
（5）ParameterName:"@s_QAProductWarehouseInfo_ProductType" DbType:"AnsiString" Value:"1"
（6）ParameterName:"@s_QAProductWarehouseInfo_Color" DbType:"AnsiString" Value:"3"
（7）ParameterName:"@n_QAProductWarehouseInfo_Warehouse_Id" DbType:"AnsiString" Value:"3343AE8F-3C37-4991-98C9-2B1E008418F4"
（8）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"2"
（9）ParameterName:"@n_QAProductWarehouseInfo_QualityStatus" DbType:"AnsiString" Value:"0"
（10）ParameterName:"@Sel_Id" DbType:"AnsiString" Value:"33297796-32FC-4EB3-8FA9-C47A4AE5AA99"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:37
类型：Business 业务对象：UpdateQAProductWarehouseInfo 
说明：执行业务过程[1]：0.修改QA功能对应的仓库信息
***************************************************************************************************************
SQL:
declare @s_Warehouse_Name varchar(max)
select top 1
@s_Warehouse_Name = s_Warehouse_Name
from tWarehouse with(nolock)
where n_Warehouse_Id = @n_QAProductWarehouseInfo_Warehouse_Id


declare @n_Space_Id varchar(max)
select top 1
@n_Space_Id = n_Space_Id
from tSpace with(nolock)
where s_Space_BarCode = @n_QAProductWarehouseInfo_Space_Id



update tQAProductWarehouseInfo set  
    n_QAProductWarehouseInfo_QAFunction=@n_QAProductWarehouseInfo_QAFunction,
    s_QAProductWarehouseInfo_IPAddress=@s_QAProductWarehouseInfo_IPAddress,
    s_QAProductWarehouseInfo_ProductType = @s_QAProductWarehouseInfo_ProductType,
    s_QAProductWarehouseInfo_Color = @s_QAProductWarehouseInfo_Color,
    n_QAProductWarehouseInfo_QualityStatus=@n_QAProductWarehouseInfo_QualityStatus,
    n_Warehosue_Id=@n_QAProductWarehouseInfo_Warehouse_Id,
    s_Warehouse_Name=@s_Warehouse_Name,  
	n_Space_Id = @n_Space_Id,
	s_Space_BarCode = @n_QAProductWarehouseInfo_Space_Id,
   n_QAProductWarehouseInfo_OpeType = @n_QAProductWarehouseInfo_OpeType,
    s_QAProductWarehouseInfo_Updator=@Operator,
    s_QAProductWarehouseInfo_Updatime=getdate()
    where n_QAProductWarehouseInfo_Id=@Sel_Id
	 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_Space_Id" DbType:"AnsiString" Value:"E150401"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@n_QAProductWarehouseInfo_OpeType" DbType:"AnsiString" Value:"1"
（4）ParameterName:"@s_QAProductWarehouseInfo_IPAddress" DbType:"AnsiString" Value:"1"
（5）ParameterName:"@s_QAProductWarehouseInfo_ProductType" DbType:"AnsiString" Value:"1"
（6）ParameterName:"@s_QAProductWarehouseInfo_Color" DbType:"AnsiString" Value:"3"
（7）ParameterName:"@n_QAProductWarehouseInfo_Warehouse_Id" DbType:"AnsiString" Value:"3343AE8F-3C37-4991-98C9-2B1E008418F4"
（8）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"2"
（9）ParameterName:"@n_QAProductWarehouseInfo_QualityStatus" DbType:"AnsiString" Value:"0"
（10）ParameterName:"@Sel_Id" DbType:"AnsiString" Value:"33297796-32FC-4EB3-8FA9-C47A4AE5AA99"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:38
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:39
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:39
类型：Query 查询对象：SelQAProductWarehouseInfoList 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:

select * from ( select RowNumber=row_number() over(order by 采集功能 asc),* from (
select 
--[Columns]
n_QAProductWarehouseInfo_Id,
    (case n_QAProductWarehouseInfo_QAFunction when 1 then '大东1楼QA'
    when 2 then '大东3楼QA'
	when 3 then '大东3楼预检'
	when 4 then '大东1楼终检' 
	when 5 then '高科立体库'
        when 6 then '大东1楼预检' else '' end) as '采集功能',
	s_QAProductWarehouseInfo_IPAddress as 'IP地址',
	s_QAProductWarehouseInfo_ProductType as '产品分类',
	s_QAProductWarehouseInfo_Color as '颜色分类',
    (case n_QAProductWarehouseInfo_QualityStatus when 0 then '未检验'
    when 1 then '合格'
    when 2 then '待定'
    when 3 then '报废'
    when 4 then '返工'
    when 5 then '待退' else '' end) as '质量状态',
	(case n_QAProductWarehouseInfo_OpeType when 1 then '入库' else '出库' end) as '操作类型',
    n_Warehosue_Id,
    s_Warehouse_Name as '对应自动出入库的仓库名称', 
    s_Space_BarCode as '对应自动出入库的储位码',
    n_QAProductWarehouseInfo_state
--[/Columns]
from tQAProductWarehouseInfo with(nolock)
where n_QAProductWarehouseInfo_state = 1
and n_QAProductWarehouseInfo_QAFunction = (
case ISNULL(@n_QAProductWarehouseInfo_QAFunction,0) when 0
then n_QAProductWarehouseInfo_QAFunction else @n_QAProductWarehouseInfo_QAFunction end
)
and n_Warehosue_Id = (
case ISNULL(@n_Warehosue_Id,'0') when '0'
then n_Warehosue_Id else @n_Warehosue_Id end
)
) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 

 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"0"
（1）ParameterName:"@n_Warehosue_Id" DbType:"AnsiString" Value:"0"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（3）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（4）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（5）ParameterName:"@endIndex" DbType:"Int32" Value:"20"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:35:39
类型：Query 查询对象：SelQAProductWarehouseInfoList 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:

 select RowsCount=COUNT(1) from ( 
select 
 R=1 
from tQAProductWarehouseInfo with(nolock)
where n_QAProductWarehouseInfo_state = 1
and n_QAProductWarehouseInfo_QAFunction = (
case ISNULL(@n_QAProductWarehouseInfo_QAFunction,0) when 0
then n_QAProductWarehouseInfo_QAFunction else @n_QAProductWarehouseInfo_QAFunction end
)
and n_Warehosue_Id = (
case ISNULL(@n_Warehosue_Id,'0') when '0'
then n_Warehosue_Id else @n_Warehosue_Id end
)
 ) T_RowsCount 

 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"0"
（1）ParameterName:"@n_Warehosue_Id" DbType:"AnsiString" Value:"0"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（3）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（4）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（5）ParameterName:"@endIndex" DbType:"Int32" Value:"20"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:39:25
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:39:25
类型：Query 查询对象：SelPowersByModuleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
-- if @ModuleID='_Default_Role'
--   select PowerID=p.s_PowerID,PowerName=p.s_PowerName,PowerType=p.n_Type ,IsPublic=b_IsPublic
--   from tPower p
--  where p.n_Type=1--默认权限
--   order by p.n_Type ,p.s_PowerID
--else
--   select PowerID=p.s_PowerID,PowerName=p.s_PowerName,PowerType=p.n_Type  ,IsPublic=p.b_IsPublic
--   from tModulePower mp
--   join tPower p on mp.s_PowerID=p.s_PowerID
--  where mp.s_ModuleID=@ModuleID
--   order by p.n_Type ,p.s_PowerID


if @ModuleID='_Default_Role'
   select PowerID=p.s_PowerID,PowerName=p.s_PowerName,PowerType=p.n_Type ,IsPublic=b_IsPublic,IsCheck=1
   from tPower p
  where p.n_Type=1--默认权限
   order by p.n_Type ,p.s_PowerID
else
   select PowerID=p.s_PowerID,PowerName=p.s_PowerName,PowerType=p.n_Type ,IsPublic=p.b_IsPublic,
IsCheck=(case isnull(tRolePower.s_RoleID,'') when '' then 0 else 1 end)
   from tModulePower mp with(nolock)
  left join tPower p with(nolock) on mp.s_PowerID=p.s_PowerID
  left join  tRolePower with(nolock) on tRolePower.s_PowerID = mp.s_PowerID
  and s_RoleID = @RoleID
  where mp.s_ModuleID=@ModuleID
   order by p.n_Type ,p.s_PowerID

 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@ModuleID" DbType:"AnsiString" Value:"ckjcxxgl"
（1）ParameterName:"@RoleID" DbType:"AnsiString" Value:"null"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（3）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:43:43
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:43:43
类型：Query 查询对象：Tool_SelDictionarys 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select * from ( select RowNumber=row_number() over(order by Field desc),* from (
SELECT  
--[Columns]
    ID=n_ID,
    Field=s_Field,
    Scene=s_Scene,
    Location=s_Location,
    Caption=s_Caption,
    Type=s_Type,
    Format=s_Format,
    CommonID=s_CommonID,
    Width=s_Width,
    Sql=s_Sql
--[/Columns]
from tDictionary
where s_Location=case isnull(@Location,'') when '' then s_Location
                                                               else @Location end
and isnull(s_Field,'') like '%'+isnull(@Field,'')+'%'
and isnull(s_Caption,'') like '%'+isnull(@Caption,'') +'%'

) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Field" DbType:"AnsiString" Value:"Fu"
（1）ParameterName:"@Caption" DbType:"AnsiString" Value:""
（2）ParameterName:"@Location" DbType:"AnsiString" Value:"chs"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"10"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:43:43
类型：Query 查询对象：Tool_SelDictionarys 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:
 select RowsCount=COUNT(1) from ( 
SELECT  
 R=1 
from tDictionary
where s_Location=case isnull(@Location,'') when '' then s_Location
                                                               else @Location end
and isnull(s_Field,'') like '%'+isnull(@Field,'')+'%'
and isnull(s_Caption,'') like '%'+isnull(@Caption,'') +'%'

 ) T_RowsCount 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Field" DbType:"AnsiString" Value:"Fu"
（1）ParameterName:"@Caption" DbType:"AnsiString" Value:""
（2）ParameterName:"@Location" DbType:"AnsiString" Value:"chs"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"10"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:44:56
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:44:56
类型：Business 业务对象：Tool_UpdateDictionary 
说明：执行业务检查：1.0.该字段在相同的本地化、情景中已经存在
***************************************************************************************************************
SQL:
 if @:UpdateFlag='delete'
select 1
else

if exists (
select 1 from tDictionary 
where s_Field=@:Field 
and s_Location=@:Location 
and s_Scene=@:Scene
and n_ID!=@:ID
)
     select 1 where 1=2
else
     select 1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Caption" DbType:"String" Value:"QA使用地点"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@CommonID" DbType:"String" Value:""
（4）ParameterName:"@Field" DbType:"String" Value:"n_QAProductWarehouseInfo_QAFunction"
（5）ParameterName:"@Format" DbType:"String" Value:""
（6）ParameterName:"@ID" DbType:"String" Value:"23D6E8E9-4504-4C74-8790-C5AF2C709BBE"
（7）ParameterName:"@Location" DbType:"String" Value:"chs"
（8）ParameterName:"@Scene" DbType:"String" Value:""
（9）ParameterName:"@Sql" DbType:"String" Value:"0=全部;1=大东1楼QA;2=大东3楼QA;3=大东3楼预检;4=大东1楼终检;5=高科立体库;6=大东1楼预检;7=小件超市补货;"
（10）ParameterName:"@Type" DbType:"String" Value:"Int"
（11）ParameterName:"@UpdateFlag" DbType:"String" Value:"update"
（12）ParameterName:"@Width" DbType:"String" Value:""
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:44:56
类型：Business 业务对象：Tool_UpdateDictionary 
说明：执行业务过程[1]：0.根据状态更新数据字典
***************************************************************************************************************
SQL:

if @UpdateFlag='add'

insert into tDictionary (
    s_Field,
    s_Scene,
    s_Location,
    s_Caption,
    s_Type,
    s_Format,
    s_CommonID,
    s_Sql,
    s_Width
)values (
    rtrim(@Field),
    rtrim(@Scene),
    @Location,
    @Caption,
    @Type,
    @Format,
    @CommonID,
    @Sql,
    @Width
)
else if @UpdateFlag='update'
update tDictionary set 
    s_Field=rtrim(@Field),
    s_Scene=rtrim(@Scene),
    s_Location=@Location,
    s_Caption=@Caption,
    s_Type=@Type,
    s_Format=@Format,
    s_CommonID=@CommonID,
    s_Sql=@Sql,
    s_Width=@Width
where     n_ID=@ID
else if @UpdateFlag='delete'
delete from tDictionary 
where     n_ID=@ID
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Caption" DbType:"String" Value:"QA使用地点"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@CommonID" DbType:"String" Value:""
（4）ParameterName:"@Field" DbType:"String" Value:"n_QAProductWarehouseInfo_QAFunction"
（5）ParameterName:"@Format" DbType:"String" Value:""
（6）ParameterName:"@ID" DbType:"String" Value:"23D6E8E9-4504-4C74-8790-C5AF2C709BBE"
（7）ParameterName:"@Location" DbType:"String" Value:"chs"
（8）ParameterName:"@Scene" DbType:"String" Value:""
（9）ParameterName:"@Sql" DbType:"String" Value:"0=全部;1=大东1楼QA;2=大东3楼QA;3=大东3楼预检;4=大东1楼终检;5=高科立体库;6=大东1楼预检;7=小件超市补货;"
（10）ParameterName:"@Type" DbType:"String" Value:"Int"
（11）ParameterName:"@UpdateFlag" DbType:"String" Value:"update"
（12）ParameterName:"@Width" DbType:"String" Value:""
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:44:57
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:44:57
类型：Query 查询对象：Tool_SelDictionarys 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select * from ( select RowNumber=row_number() over(order by Field desc),* from (
SELECT  
--[Columns]
    ID=n_ID,
    Field=s_Field,
    Scene=s_Scene,
    Location=s_Location,
    Caption=s_Caption,
    Type=s_Type,
    Format=s_Format,
    CommonID=s_CommonID,
    Width=s_Width,
    Sql=s_Sql
--[/Columns]
from tDictionary
where s_Location=case isnull(@Location,'') when '' then s_Location
                                                               else @Location end
and isnull(s_Field,'') like '%'+isnull(@Field,'')+'%'
and isnull(s_Caption,'') like '%'+isnull(@Caption,'') +'%'

) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Field" DbType:"AnsiString" Value:"Fu"
（1）ParameterName:"@Caption" DbType:"AnsiString" Value:""
（2）ParameterName:"@Location" DbType:"AnsiString" Value:"chs"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"10"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:44:57
类型：Query 查询对象：Tool_SelDictionarys 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:
 select RowsCount=COUNT(1) from ( 
SELECT  
 R=1 
from tDictionary
where s_Location=case isnull(@Location,'') when '' then s_Location
                                                               else @Location end
and isnull(s_Field,'') like '%'+isnull(@Field,'')+'%'
and isnull(s_Caption,'') like '%'+isnull(@Caption,'') +'%'

 ) T_RowsCount 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Field" DbType:"AnsiString" Value:"Fu"
（1）ParameterName:"@Caption" DbType:"AnsiString" Value:""
（2）ParameterName:"@Location" DbType:"AnsiString" Value:"chs"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"10"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:45:25
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:45:25
类型：Query 查询对象：Tool_SelDictionarys 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select * from ( select RowNumber=row_number() over(order by Field desc),* from (
SELECT  
--[Columns]
    ID=n_ID,
    Field=s_Field,
    Scene=s_Scene,
    Location=s_Location,
    Caption=s_Caption,
    Type=s_Type,
    Format=s_Format,
    CommonID=s_CommonID,
    Width=s_Width,
    Sql=s_Sql
--[/Columns]
from tDictionary
where s_Location=case isnull(@Location,'') when '' then s_Location
                                                               else @Location end
and isnull(s_Field,'') like '%'+isnull(@Field,'')+'%'
and isnull(s_Caption,'') like '%'+isnull(@Caption,'') +'%'

) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Field" DbType:"AnsiString" Value:"Fu"
（1）ParameterName:"@Caption" DbType:"AnsiString" Value:""
（2）ParameterName:"@Location" DbType:"AnsiString" Value:"chs"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"10"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:45:25
类型：Query 查询对象：Tool_SelDictionarys 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:
 select RowsCount=COUNT(1) from ( 
SELECT  
 R=1 
from tDictionary
where s_Location=case isnull(@Location,'') when '' then s_Location
                                                               else @Location end
and isnull(s_Field,'') like '%'+isnull(@Field,'')+'%'
and isnull(s_Caption,'') like '%'+isnull(@Caption,'') +'%'

 ) T_RowsCount 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Field" DbType:"AnsiString" Value:"Fu"
（1）ParameterName:"@Caption" DbType:"AnsiString" Value:""
（2）ParameterName:"@Location" DbType:"AnsiString" Value:"chs"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"10"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:45:30
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:45:30
类型：Business 业务对象：Tool_UpdateDictionary 
说明：执行业务检查：1.0.该字段在相同的本地化、情景中已经存在
***************************************************************************************************************
SQL:
 if @:UpdateFlag='delete'
select 1
else

if exists (
select 1 from tDictionary 
where s_Field=@:Field 
and s_Location=@:Location 
and s_Scene=@:Scene
and n_ID!=@:ID
)
     select 1 where 1=2
else
     select 1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Caption" DbType:"String" Value:"QA使用地点"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@CommonID" DbType:"String" Value:""
（4）ParameterName:"@Field" DbType:"String" Value:"n_QAProductWarehouseInfo_QAFunction"
（5）ParameterName:"@Format" DbType:"String" Value:""
（6）ParameterName:"@ID" DbType:"String" Value:"23D6E8E9-4504-4C74-8790-C5AF2C709BBE"
（7）ParameterName:"@Location" DbType:"String" Value:"chs"
（8）ParameterName:"@Scene" DbType:"String" Value:""
（9）ParameterName:"@Sql" DbType:"String" Value:"0=全部;1=大东1楼QA;2=大东3楼QA;3=大东3楼预检;4=大东1楼终检;5=高科立体库;6=大东1楼预检;7=小件超市补货;"
（10）ParameterName:"@Type" DbType:"String" Value:"Int"
（11）ParameterName:"@UpdateFlag" DbType:"String" Value:"update"
（12）ParameterName:"@Width" DbType:"String" Value:""
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:45:30
类型：Business 业务对象：Tool_UpdateDictionary 
说明：执行业务过程[1]：0.根据状态更新数据字典
***************************************************************************************************************
SQL:

if @UpdateFlag='add'

insert into tDictionary (
    s_Field,
    s_Scene,
    s_Location,
    s_Caption,
    s_Type,
    s_Format,
    s_CommonID,
    s_Sql,
    s_Width
)values (
    rtrim(@Field),
    rtrim(@Scene),
    @Location,
    @Caption,
    @Type,
    @Format,
    @CommonID,
    @Sql,
    @Width
)
else if @UpdateFlag='update'
update tDictionary set 
    s_Field=rtrim(@Field),
    s_Scene=rtrim(@Scene),
    s_Location=@Location,
    s_Caption=@Caption,
    s_Type=@Type,
    s_Format=@Format,
    s_CommonID=@CommonID,
    s_Sql=@Sql,
    s_Width=@Width
where     n_ID=@ID
else if @UpdateFlag='delete'
delete from tDictionary 
where     n_ID=@ID
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Caption" DbType:"String" Value:"QA使用地点"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@CommonID" DbType:"String" Value:""
（4）ParameterName:"@Field" DbType:"String" Value:"n_QAProductWarehouseInfo_QAFunction"
（5）ParameterName:"@Format" DbType:"String" Value:""
（6）ParameterName:"@ID" DbType:"String" Value:"23D6E8E9-4504-4C74-8790-C5AF2C709BBE"
（7）ParameterName:"@Location" DbType:"String" Value:"chs"
（8）ParameterName:"@Scene" DbType:"String" Value:""
（9）ParameterName:"@Sql" DbType:"String" Value:"0=全部;1=大东1楼QA;2=大东3楼QA;3=大东3楼预检;4=大东1楼终检;5=高科立体库;6=大东1楼预检;7=小件超市补货;"
（10）ParameterName:"@Type" DbType:"String" Value:"Int"
（11）ParameterName:"@UpdateFlag" DbType:"String" Value:"update"
（12）ParameterName:"@Width" DbType:"String" Value:""
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:45:31
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:45:31
类型：Query 查询对象：Tool_SelDictionarys 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select * from ( select RowNumber=row_number() over(order by Field desc),* from (
SELECT  
--[Columns]
    ID=n_ID,
    Field=s_Field,
    Scene=s_Scene,
    Location=s_Location,
    Caption=s_Caption,
    Type=s_Type,
    Format=s_Format,
    CommonID=s_CommonID,
    Width=s_Width,
    Sql=s_Sql
--[/Columns]
from tDictionary
where s_Location=case isnull(@Location,'') when '' then s_Location
                                                               else @Location end
and isnull(s_Field,'') like '%'+isnull(@Field,'')+'%'
and isnull(s_Caption,'') like '%'+isnull(@Caption,'') +'%'

) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Field" DbType:"AnsiString" Value:"Fu"
（1）ParameterName:"@Caption" DbType:"AnsiString" Value:""
（2）ParameterName:"@Location" DbType:"AnsiString" Value:"chs"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"10"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:45:31
类型：Query 查询对象：Tool_SelDictionarys 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:
 select RowsCount=COUNT(1) from ( 
SELECT  
 R=1 
from tDictionary
where s_Location=case isnull(@Location,'') when '' then s_Location
                                                               else @Location end
and isnull(s_Field,'') like '%'+isnull(@Field,'')+'%'
and isnull(s_Caption,'') like '%'+isnull(@Caption,'') +'%'

 ) T_RowsCount 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Field" DbType:"AnsiString" Value:"Fu"
（1）ParameterName:"@Caption" DbType:"AnsiString" Value:""
（2）ParameterName:"@Location" DbType:"AnsiString" Value:"chs"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"10"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:51:23
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 14:55:25
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:00:21
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:00:21
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:00:21
类型：Business 业务对象：AddQAProductWarehouseInfo 
说明：执行业务检查：1.*.该储位码在仓库中不存在，请重新确认
***************************************************************************************************************
SQL:
 if exists(select 1 from tSpace with(nolock)
 where s_Space_BarCode = @:n_QAProductWarehouseInfo_Space_Id
and n_Warehouse_Id = @:n_QAProductWarehouseInfo_Warehouse_Id
 and n_Space_state = 1)
 begin

 select 1

 end
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_Warehouse_Id" DbType:"AnsiString" Value:"A5392F2F-BA93-4FC5-BDD1-A91F33091C1A"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"7"
（4）ParameterName:"@n_QAProductWarehouseInfo_QualityStatus" DbType:"AnsiString" Value:"0"
（5）ParameterName:"@n_QAProductWarehouseInfo_Space_Id" DbType:"AnsiString" Value:"DH010101"
（6）ParameterName:"@n_QAProductWarehouseInfo_OpeType" DbType:"AnsiString" Value:"1"
（7）ParameterName:"@s_QAProductWarehouseInfo_IPAddress" DbType:"AnsiString" Value:" "
（8）ParameterName:"@s_QAProductWarehouseInfo_ProductType" DbType:"AnsiString" Value:" "
（9）ParameterName:"@s_QAProductWarehouseInfo_Color" DbType:"AnsiString" Value:" "
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:00:34
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:00:35
类型：Query 查询对象：SelSessionState 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select top 1 LoginState = 
(case when 
DATEDIFF(MINUTE,tSessionStateRecord.d_LoginTime,GETDATE())
< tSessionStateRecord.n_HoldingTime then 0 else 1 end),
UserNO = tSessionStateRecord.s_UserNO,
UserName = tUser.s_UserName
 from tSessionStateRecord tSessionStateRecord with(nolock)
 left join tUser tUser with(nolock) on tSessionStateRecord.s_UserNO = tUser.s_UserNO
where tSessionStateRecord.s_IPAddress = @IPAddress 
and tSessionStateRecord.s_UserAgent = @UserAgent
and tSessionStateRecord.s_UserNO <> ''
and tUser.n_state = 1
order by tSessionStateRecord.d_LoginTime desc
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@IPAddress" DbType:"AnsiString" Value:"::1"
（1）ParameterName:"@UserAgent" DbType:"AnsiString" Value:"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:00:37
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:00:37
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:00:37
类型：Query 查询对象：SelRackList 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select * from ( select RowNumber=row_number() over(order by s_Rack_Code asc),* from (
SELECT 
--[Columns]
      n_Rack_Id
      ,[s_Block_Name]
      ,[s_Warehouse_Name]
      ,[s_Rack_StorageType]
      ,s_Rack_CodePrefix
      ,[s_Rack_Code]
      ,[n_Rack_SpaceCapacity]
      ,[n_Rack_LayerCapacity] 
      ,[n_Rack_MaximumStorageCapacity]
      ,(case isnull(s_Rack_LocationLock,'') when '' then '未锁定' else s_Rack_LocationLock end ) as s_Rack_LocationLock 
	   
	  ,[n_Rack_QualityLevel]=
      (case isnull([n_Rack_QualityLevel],-1) when -1 then '' when 1 then '合格' when 2 then '报废' when 3 then '打磨' when 4 then '待判定' else '' end) 
      ,[f_Rack_Width]
      ,[f_Rack_Height]
      ,[f_Rack_Length]
      ,(case isnull([n_Rack_UsageStatus],3) when 1 then '已占用' when 2 then '未完全占用' else '空闲' end) as n_Rack_UsageStatus 
	  ,[s_Rack_CustomFields1]
      ,[s_Rack_CustomFields2]
      ,[s_Rack_CustomFields3]
      ,[s_Rack_CustomFields4]
      ,[s_Rack_CustomFields5]
      ,[s_Rack_CustomFields6]
      ,[s_Rack_CustomFields7]
      ,[s_Rack_CustomFields8]
      ,[s_Rack_CustomFields9]
      ,[s_Rack_CustomFields10]
      ,[n_Rack_state]=(case n_Rack_state when 1 then '正常' else '停用' end)
      ,[s_Rack_Creator]
      ,[d_Rack_CreateTime]
      ,[s_Rack_Updator]
      ,[d_Rack_UpdateTime]
--[/Columns]
  FROM [dbo].[tRack] with(nolock)
where [s_Rack_Code] like (case when isnull(@Rack_Code,'') = '' then [s_Rack_Code] else '%'+@Rack_Code+'%' end)
and n_Rack_state = (case when isnull(@Rack_state,0) = 0 then n_Rack_state else @Rack_state end)
and n_Warehouse_Id = @n_Warehouse_Id
) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Rack_Code" DbType:"AnsiString" Value:""
（1）ParameterName:"@Rack_state" DbType:"Int32" Value:"1"
（2）ParameterName:"@n_Warehouse_Id" DbType:"AnsiString" Value:"A5392F2F-BA93-4FC5-BDD1-A91F33091C1A"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:00:37
类型：Query 查询对象：SelRackList 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:
 select RowsCount=COUNT(1) from ( 
SELECT 
 R=1 
  FROM [dbo].[tRack] with(nolock)
where [s_Rack_Code] like (case when isnull(@Rack_Code,'') = '' then [s_Rack_Code] else '%'+@Rack_Code+'%' end)
and n_Rack_state = (case when isnull(@Rack_state,0) = 0 then n_Rack_state else @Rack_state end)
and n_Warehouse_Id = @n_Warehouse_Id
 ) T_RowsCount 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Rack_Code" DbType:"AnsiString" Value:""
（1）ParameterName:"@Rack_state" DbType:"Int32" Value:"1"
（2）ParameterName:"@n_Warehouse_Id" DbType:"AnsiString" Value:"A5392F2F-BA93-4FC5-BDD1-A91F33091C1A"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:02:08
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:02:08
类型：Query 查询对象：SelSessionState 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select top 1 LoginState = 
(case when 
DATEDIFF(MINUTE,tSessionStateRecord.d_LoginTime,GETDATE())
< tSessionStateRecord.n_HoldingTime then 0 else 1 end),
UserNO = tSessionStateRecord.s_UserNO,
UserName = tUser.s_UserName
 from tSessionStateRecord tSessionStateRecord with(nolock)
 left join tUser tUser with(nolock) on tSessionStateRecord.s_UserNO = tUser.s_UserNO
where tSessionStateRecord.s_IPAddress = @IPAddress 
and tSessionStateRecord.s_UserAgent = @UserAgent
and tSessionStateRecord.s_UserNO <> ''
and tUser.n_state = 1
order by tSessionStateRecord.d_LoginTime desc
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@IPAddress" DbType:"AnsiString" Value:"::1"
（1）ParameterName:"@UserAgent" DbType:"AnsiString" Value:"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:02:11
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:02:12
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:02:12
类型：Query 查询对象：SelSpaceList 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select * from ( select RowNumber=row_number() over(order by s_Space_BarCode asc),* from (
SELECT 
--[Columns]
      [tSpace].[n_Space_Id]
      ,[tSpace].[n_CombinedSpace_Id]  
      ,n_SplitSpace_Id
      ,(case when ISNULL(tCombinedSpace.n_CombinedSpace_Id,'') = '' then 0 else 1 end) as n_CombinedSpace_State
      ,tWarehouse.s_Warehouse_Name
      ,tRack.s_Rack_Code
      ,[s_Space_Code]
      ,[s_Space_BarCode]
      ,[n_Space_BayNumber]
      ,[n_Space_LayerNumber] 
      ,[n_Space_Position]
      ,[n_Space_MaxPosition]
      ,[s_Space_StorageType]
      ,(case isnull(s_Space_LocationLock,'') when '' then '未锁定' else s_Space_LocationLock end ) as [s_Space_LocationLock]
      ,(case isnull(s_Space_IsVirtualLocation,'') when '' then '否' else s_Space_IsVirtualLocation end ) as s_Space_IsVirtualLocation
	  ,[n_Space_Warehouse]
      ,[n_Space_Width]
      ,[n_Space_Height]
      ,[n_Space_Length]
      ,[n_Space_ShipmentSequence]
      ,[n_Space_QualityLevel]=
      (case isnull([n_Space_QualityLevel],-1) when -1 then '' when 1 then '合格' when 2 then '报废' when 3 then '打磨' when 4 then '待判定' else '' end) 
      ,[n_Space_UsageStatus]=(case n_Space_UsageStatus when 1 then '已占用' when 2 then '未完全占用' else '空闲' end) 
      ,[s_Space_OverflowLocation]
      ,[n_Space_RestrictedStorageMaterialType]
      ,[s_Space_CustomFields1]
      ,[s_Space_CustomFields2]
      ,[s_Space_CustomFields3]
      ,[s_Space_CustomFields4]
      ,[s_Space_CustomFields5]
      ,[s_Space_CustomFields6]
      ,[s_Space_CustomFields7]
      ,[s_Space_CustomFields8]
      ,[s_Space_CustomFields9]
      ,[s_Space_CustomFields10]
      ,[n_Space_state]=(case n_Space_state when 1 then '正常' else '停用' end)
      ,[s_Space_Creator]
      ,[d_Space_CreateTime]
      ,[s_Space_Updator]
      ,[d_Space_UpdateTime]
--[/Columns]
  FROM [dbo].[tSpace] with(nolock)
left join tRack tRack with(nolock) on tRack.n_Rack_Id = tSpace.n_Rack_Id
left join tWarehouse tWarehouse with(nolock) on tWarehouse.n_Warehouse_Id = tSpace.n_Warehouse_Id
left join tCombinedSpace tCombinedSpace with(nolock) on tCombinedSpace.n_Space_Id = tSpace.n_Space_Id
and tCombinedSpace.n_CombinedSpace_state = 1
where tSpace.n_Rack_Id = @n_Rack_Id
and n_Space_BayNumber = (case when isnull(@Space_BayNumber,'') = '' then n_Space_BayNumber else @Space_BayNumber end) 
and [n_Space_LayerNumber] = (case when isnull(@Space_LayerNumber,'') = '' then [n_Space_LayerNumber] else @Space_LayerNumber end) 
and isnull([s_Space_BarCode],'') like (case when isnull(@Space_BarCode,'') = '' then isnull(s_Space_BarCode,'') else '%'+@Space_BarCode+'%' end) 
and n_Space_state = (case when isnull(@Space_state,0) = 0 then n_Space_state else @Space_state end)
) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 

 

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_Rack_Id" DbType:"AnsiString" Value:"01C6544F-515F-434C-8CE2-57EF38A4E258"
（1）ParameterName:"@Space_BayNumber" DbType:"AnsiString" Value:""
（2）ParameterName:"@Space_LayerNumber" DbType:"AnsiString" Value:""
（3）ParameterName:"@Space_BarCode" DbType:"AnsiString" Value:""
（4）ParameterName:"@Space_state" DbType:"Int32" Value:"1"
（5）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（6）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（7）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（8）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:02:12
类型：Query 查询对象：SelSpaceList 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:
 select RowsCount=COUNT(1) from ( 
SELECT 
 R=1 
  FROM [dbo].[tSpace] with(nolock)
left join tRack tRack with(nolock) on tRack.n_Rack_Id = tSpace.n_Rack_Id
left join tWarehouse tWarehouse with(nolock) on tWarehouse.n_Warehouse_Id = tSpace.n_Warehouse_Id
left join tCombinedSpace tCombinedSpace with(nolock) on tCombinedSpace.n_Space_Id = tSpace.n_Space_Id
and tCombinedSpace.n_CombinedSpace_state = 1
where tSpace.n_Rack_Id = @n_Rack_Id
and n_Space_BayNumber = (case when isnull(@Space_BayNumber,'') = '' then n_Space_BayNumber else @Space_BayNumber end) 
and [n_Space_LayerNumber] = (case when isnull(@Space_LayerNumber,'') = '' then [n_Space_LayerNumber] else @Space_LayerNumber end) 
and isnull([s_Space_BarCode],'') like (case when isnull(@Space_BarCode,'') = '' then isnull(s_Space_BarCode,'') else '%'+@Space_BarCode+'%' end) 
and n_Space_state = (case when isnull(@Space_state,0) = 0 then n_Space_state else @Space_state end)
 ) T_RowsCount 

 

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_Rack_Id" DbType:"AnsiString" Value:"01C6544F-515F-434C-8CE2-57EF38A4E258"
（1）ParameterName:"@Space_BayNumber" DbType:"AnsiString" Value:""
（2）ParameterName:"@Space_LayerNumber" DbType:"AnsiString" Value:""
（3）ParameterName:"@Space_BarCode" DbType:"AnsiString" Value:""
（4）ParameterName:"@Space_state" DbType:"Int32" Value:"1"
（5）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（6）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（7）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（8）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:02:13
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:02:14
类型：Query 查询对象：SelSessionState 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select top 1 LoginState = 
(case when 
DATEDIFF(MINUTE,tSessionStateRecord.d_LoginTime,GETDATE())
< tSessionStateRecord.n_HoldingTime then 0 else 1 end),
UserNO = tSessionStateRecord.s_UserNO,
UserName = tUser.s_UserName
 from tSessionStateRecord tSessionStateRecord with(nolock)
 left join tUser tUser with(nolock) on tSessionStateRecord.s_UserNO = tUser.s_UserNO
where tSessionStateRecord.s_IPAddress = @IPAddress 
and tSessionStateRecord.s_UserAgent = @UserAgent
and tSessionStateRecord.s_UserNO <> ''
and tUser.n_state = 1
order by tSessionStateRecord.d_LoginTime desc
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@IPAddress" DbType:"AnsiString" Value:"::1"
（1）ParameterName:"@UserAgent" DbType:"AnsiString" Value:"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:02:16
类型：Query 查询对象：SelSpaceNeedInfo 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:

--基础数据关联查询
  
select top 1 
 s_Block_Code,
 s_Shopfloor_Code,
 s_Warehouse_Code,
 tWarehouse.s_Warehouse_Name,
 s_Rack_Code
from tRack tRack with(nolock)
left join tWarehouse tWarehouse with(nolock) on tWarehouse.n_Warehouse_Id = tRack.n_Warehouse_Id
left join tBlock tBlock with(nolock) on tBlock.n_Block_Id = tRack.n_Block_Id
left join tShopfloor tShopfloor with(nolock) on tShopfloor.n_Shopfloor_Id = tRack.n_Shopfloor_Id
where tRack.n_Rack_Id = @n_Rack_Id 
and n_Warehouse_state = 1 and tRack.n_Rack_state = 1
and n_Block_state = 1 and n_Shopfloor_state = 1

--分隔符规则
declare @SplitStr varchar(50)
set @SplitStr = (select top 1 s_SysParameter_value1 from tSysParameter with(nolock)
where s_SysParameter_Name = '储位码规则-分隔符' and n_SysParameter_state = 1)

select SplitStr = @SplitStr

--储位编码最大值
declare @Space_MaxCode varchar(max)

select top 1 @Space_MaxCode = s_Space_Code from tSpace with(nolock)
where n_Rack_Id = @n_Rack_Id and n_Space_state = 1
order by Convert(int,s_Space_Code) desc

select Space_MaxCode = isnull(@Space_MaxCode,0) + 1

--获取货架编码 与 货架前缀
 declare @Rack_Code varchar(max),@Rack_CodePrefix varchar(max)

 select @Rack_Code = s_Rack_Code,@Rack_CodePrefix = s_Rack_CodePrefix from tRack with(nolock)
 where n_Rack_Id = @n_Rack_Id
 and n_Rack_state = 1

 select s_Rack_Code = @Rack_Code,s_Rack_CodePrefix = @Rack_CodePrefix
 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_Rack_Id" DbType:"String" Value:"01C6544F-515F-434C-8CE2-57EF38A4E258"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:02:23
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:02:23
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:02:23
类型：Business 业务对象：AddQAProductWarehouseInfo 
说明：执行业务检查：1.*.该储位码在仓库中不存在，请重新确认
***************************************************************************************************************
SQL:
 if exists(select 1 from tSpace with(nolock)
 where s_Space_BarCode = @:n_QAProductWarehouseInfo_Space_Id
and n_Warehouse_Id = @:n_QAProductWarehouseInfo_Warehouse_Id
 and n_Space_state = 1)
 begin

 select 1

 end
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_Warehouse_Id" DbType:"AnsiString" Value:"A5392F2F-BA93-4FC5-BDD1-A91F33091C1A"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"7"
（4）ParameterName:"@n_QAProductWarehouseInfo_QualityStatus" DbType:"AnsiString" Value:"0"
（5）ParameterName:"@n_QAProductWarehouseInfo_Space_Id" DbType:"AnsiString" Value:"ZPCJH010101"
（6）ParameterName:"@n_QAProductWarehouseInfo_OpeType" DbType:"AnsiString" Value:"1"
（7）ParameterName:"@s_QAProductWarehouseInfo_IPAddress" DbType:"AnsiString" Value:" "
（8）ParameterName:"@s_QAProductWarehouseInfo_ProductType" DbType:"AnsiString" Value:" "
（9）ParameterName:"@s_QAProductWarehouseInfo_Color" DbType:"AnsiString" Value:" "
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:02:23
类型：Business 业务对象：AddQAProductWarehouseInfo 
说明：执行业务检查：2.*.系统已存在该采集功能的数据，请重新确认
***************************************************************************************************************
SQL:

  if not exists(select 1 from tQAProductWarehouseInfo with(nolock)
 where n_QAProductWarehouseInfo_QAFunction = @:n_QAProductWarehouseInfo_QAFunction
 and n_QAProductWarehouseInfo_QualityStatus = @:n_QAProductWarehouseInfo_QualityStatus
 and n_QAProductWarehouseInfo_OpeType = @:n_QAProductWarehouseInfo_OpeType
 and n_QAProductWarehouseInfo_state = 1)
 begin

 select 1

 end
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_Warehouse_Id" DbType:"AnsiString" Value:"A5392F2F-BA93-4FC5-BDD1-A91F33091C1A"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"7"
（4）ParameterName:"@n_QAProductWarehouseInfo_QualityStatus" DbType:"AnsiString" Value:"0"
（5）ParameterName:"@n_QAProductWarehouseInfo_Space_Id" DbType:"AnsiString" Value:"ZPCJH010101"
（6）ParameterName:"@n_QAProductWarehouseInfo_OpeType" DbType:"AnsiString" Value:"1"
（7）ParameterName:"@s_QAProductWarehouseInfo_IPAddress" DbType:"AnsiString" Value:" "
（8）ParameterName:"@s_QAProductWarehouseInfo_ProductType" DbType:"AnsiString" Value:" "
（9）ParameterName:"@s_QAProductWarehouseInfo_Color" DbType:"AnsiString" Value:" "
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:02:23
类型：Business 业务对象：AddQAProductWarehouseInfo 
说明：执行业务过程[1]：0.新增QA功能对应的仓库信息
***************************************************************************************************************
SQL:
declare @s_Warehouse_Name varchar(max)
select top 1
@s_Warehouse_Name = s_Warehouse_Name
from tWarehouse with(nolock)
where n_Warehouse_Id = @n_QAProductWarehouseInfo_Warehouse_Id

declare @n_Space_Id varchar(max)
select top 1
@n_Space_Id = n_Space_Id
from tSpace with(nolock)
where s_Space_BarCode = @n_QAProductWarehouseInfo_Space_Id


insert into tQAProductWarehouseInfo (
    n_QAProductWarehouseInfo_Id,
    n_QAProductWarehouseInfo_QAFunction,
    s_QAProductWarehouseInfo_IPAddress,
    s_QAProductWarehouseInfo_ProductType,
    s_QAProductWarehouseInfo_Color,
    n_QAProductWarehouseInfo_QualityStatus,
    n_Warehosue_Id,
    s_Warehouse_Name, 
	n_Space_Id,
	s_Space_BarCode,
    n_QAProductWarehouseInfo_OpeType,
    n_QAProductWarehouseInfo_state,
    s_QAProductWarehouseInfo_Creator,
    s_QAProductWarehouseInfo_Creatime,
    s_QAProductWarehouseInfo_Updator,
    s_QAProductWarehouseInfo_Updatime
)values (
    NEWID(),
    @n_QAProductWarehouseInfo_QAFunction,
    @s_QAProductWarehouseInfo_IPAddress,
    @s_QAProductWarehouseInfo_ProductType,
    @s_QAProductWarehouseInfo_Color,
    @n_QAProductWarehouseInfo_QualityStatus,
    @n_QAProductWarehouseInfo_Warehouse_Id,
    @s_Warehouse_Name, 
	@n_Space_Id,
	@n_QAProductWarehouseInfo_Space_Id,  
    @n_QAProductWarehouseInfo_OpeType,
    1,
    @Operator,
    getdate(),
    @Operator,
    getdate()
)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_Warehouse_Id" DbType:"AnsiString" Value:"A5392F2F-BA93-4FC5-BDD1-A91F33091C1A"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（3）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"7"
（4）ParameterName:"@n_QAProductWarehouseInfo_QualityStatus" DbType:"AnsiString" Value:"0"
（5）ParameterName:"@n_QAProductWarehouseInfo_Space_Id" DbType:"AnsiString" Value:"ZPCJH010101"
（6）ParameterName:"@n_QAProductWarehouseInfo_OpeType" DbType:"AnsiString" Value:"1"
（7）ParameterName:"@s_QAProductWarehouseInfo_IPAddress" DbType:"AnsiString" Value:" "
（8）ParameterName:"@s_QAProductWarehouseInfo_ProductType" DbType:"AnsiString" Value:" "
（9）ParameterName:"@s_QAProductWarehouseInfo_Color" DbType:"AnsiString" Value:" "
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:02:24
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:02:25
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:02:25
类型：Query 查询对象：SelQAProductWarehouseInfoList 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:

select * from ( select RowNumber=row_number() over(order by 采集功能 asc),* from (
select 
--[Columns]
n_QAProductWarehouseInfo_Id,
    (case n_QAProductWarehouseInfo_QAFunction when 1 then '大东1楼QA'
    when 2 then '大东3楼QA'
	when 3 then '大东3楼预检'
	when 4 then '大东1楼终检' 
	when 5 then '高科立体库'
        when 6 then '大东1楼预检' 
        when 7 then '小件超市补货' else '' end) as '采集功能',
	s_QAProductWarehouseInfo_IPAddress as 'IP地址',
	s_QAProductWarehouseInfo_ProductType as '产品分类',
	s_QAProductWarehouseInfo_Color as '颜色分类',
    (case n_QAProductWarehouseInfo_QualityStatus when 0 then '未检验'
    when 1 then '合格'
    when 2 then '待定'
    when 3 then '报废'
    when 4 then '返工'
    when 5 then '待退' else '' end) as '质量状态',
	(case n_QAProductWarehouseInfo_OpeType when 1 then '入库' else '出库' end) as '操作类型',
    n_Warehosue_Id,
    s_Warehouse_Name as '对应自动出入库的仓库名称', 
    s_Space_BarCode as '对应自动出入库的储位码',
    n_QAProductWarehouseInfo_state
--[/Columns]
from tQAProductWarehouseInfo with(nolock)
where n_QAProductWarehouseInfo_state = 1
and n_QAProductWarehouseInfo_QAFunction = (
case ISNULL(@n_QAProductWarehouseInfo_QAFunction,0) when 0
then n_QAProductWarehouseInfo_QAFunction else @n_QAProductWarehouseInfo_QAFunction end
)
and n_Warehosue_Id = (
case ISNULL(@n_Warehosue_Id,'0') when '0'
then n_Warehosue_Id else @n_Warehosue_Id end
)
) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 

 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"0"
（1）ParameterName:"@n_Warehosue_Id" DbType:"AnsiString" Value:"0"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（3）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（4）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（5）ParameterName:"@endIndex" DbType:"Int32" Value:"20"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:02:25
类型：Query 查询对象：SelQAProductWarehouseInfoList 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:

 select RowsCount=COUNT(1) from ( 
select 
 R=1 
from tQAProductWarehouseInfo with(nolock)
where n_QAProductWarehouseInfo_state = 1
and n_QAProductWarehouseInfo_QAFunction = (
case ISNULL(@n_QAProductWarehouseInfo_QAFunction,0) when 0
then n_QAProductWarehouseInfo_QAFunction else @n_QAProductWarehouseInfo_QAFunction end
)
and n_Warehosue_Id = (
case ISNULL(@n_Warehosue_Id,'0') when '0'
then n_Warehosue_Id else @n_Warehosue_Id end
)
 ) T_RowsCount 

 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"0"
（1）ParameterName:"@n_Warehosue_Id" DbType:"AnsiString" Value:"0"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（3）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（4）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（5）ParameterName:"@endIndex" DbType:"Int32" Value:"20"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:08:30
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:09:03
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:09:04
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:09:04
类型：Query 查询对象：SelQAProductWarehouseInfoList 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:

select * from ( select RowNumber=row_number() over(order by 采集功能 asc),* from (
select 
--[Columns]
n_QAProductWarehouseInfo_Id,
    (case n_QAProductWarehouseInfo_QAFunction when 1 then '大东1楼QA'
    when 2 then '大东3楼QA'
	when 3 then '大东3楼预检'
	when 4 then '大东1楼终检' 
	when 5 then '高科立体库'
        when 6 then '大东1楼预检' 
        when 7 then '小件超市补货' else '' end) as '采集功能',
	s_QAProductWarehouseInfo_IPAddress as 'IP地址',
	s_QAProductWarehouseInfo_ProductType as '产品分类',
	s_QAProductWarehouseInfo_Color as '颜色分类',
    (case n_QAProductWarehouseInfo_QualityStatus when 0 then '未检验'
    when 1 then '合格'
    when 2 then '待定'
    when 3 then '报废'
    when 4 then '返工'
    when 5 then '待退' else '' end) as '质量状态',
	(case n_QAProductWarehouseInfo_OpeType when 1 then '入库' else '出库' end) as '操作类型',
    n_Warehosue_Id,
    s_Warehouse_Name as '对应自动出入库的仓库名称', 
    s_Space_BarCode as '对应自动出入库的储位码',
    n_QAProductWarehouseInfo_state
--[/Columns]
from tQAProductWarehouseInfo with(nolock)
where n_QAProductWarehouseInfo_state = 1
and n_QAProductWarehouseInfo_QAFunction = (
case ISNULL(@n_QAProductWarehouseInfo_QAFunction,0) when 0
then n_QAProductWarehouseInfo_QAFunction else @n_QAProductWarehouseInfo_QAFunction end
)
and n_Warehosue_Id = (
case ISNULL(@n_Warehosue_Id,'0') when '0'
then n_Warehosue_Id else @n_Warehosue_Id end
)
) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 

 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"0"
（1）ParameterName:"@n_Warehosue_Id" DbType:"AnsiString" Value:"0"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（3）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（4）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（5）ParameterName:"@endIndex" DbType:"Int32" Value:"20"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:09:04
类型：Query 查询对象：SelQAProductWarehouseInfoList 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:

 select RowsCount=COUNT(1) from ( 
select 
 R=1 
from tQAProductWarehouseInfo with(nolock)
where n_QAProductWarehouseInfo_state = 1
and n_QAProductWarehouseInfo_QAFunction = (
case ISNULL(@n_QAProductWarehouseInfo_QAFunction,0) when 0
then n_QAProductWarehouseInfo_QAFunction else @n_QAProductWarehouseInfo_QAFunction end
)
and n_Warehosue_Id = (
case ISNULL(@n_Warehosue_Id,'0') when '0'
then n_Warehosue_Id else @n_Warehosue_Id end
)
 ) T_RowsCount 

 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@n_QAProductWarehouseInfo_QAFunction" DbType:"AnsiString" Value:"0"
（1）ParameterName:"@n_Warehosue_Id" DbType:"AnsiString" Value:"0"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（3）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（4）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（5）ParameterName:"@endIndex" DbType:"Int32" Value:"20"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:30:29
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:30:34
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:30:35
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:30:35
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:30:35
类型：Query 查询对象：SelBlockList 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select * from ( select RowNumber=row_number() over(order by n_Block_Id asc),* from (
select
--[Columns]
      n_Block_Id
      ,[s_Block_Name]
      ,[s_Block_Code]
      ,[s_Block_Address]
      ,[s_Block_Phone]
      ,[s_Block_leadingCadre]
      ,[s_Block_Purpose]
      ,[s_Block_Remark]
      ,[s_Block_CustomFields1]
      ,[s_Block_CustomFields2]
      ,[s_Block_CustomFields3]
      ,[s_Block_CustomFields4]
      ,[s_Block_CustomFields5]
      ,[s_Block_CustomFields6]
      ,[s_Block_CustomFields7]
      ,[s_Block_CustomFields8]
      ,[s_Block_CustomFields9]
      ,[s_Block_CustomFields10]
      ,n_Block_state=(case n_Block_state when 1 then '正常' else '停用' end)
--[/Columns]
from tBlock with(nolock)
where s_Block_Name like (case when isnull(@Block_Name,'') = '' then s_Block_Name else '%'+@Block_Name+'%' end)
and s_Block_Code like (case when isnull(@Block_Code,'') = '' then s_Block_Code else '%'+@Block_Code+'%' end)
and n_Block_state = (case when isnull(@Block_state,0) = 0 then n_Block_state else @Block_state end)
) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Block_Name" DbType:"AnsiString" Value:""
（1）ParameterName:"@Block_Code" DbType:"AnsiString" Value:""
（2）ParameterName:"@Block_state" DbType:"Int32" Value:"1"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:30:35
类型：Query 查询对象：SelBlockList 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:
 select RowsCount=COUNT(1) from ( 
select
 R=1 
from tBlock with(nolock)
where s_Block_Name like (case when isnull(@Block_Name,'') = '' then s_Block_Name else '%'+@Block_Name+'%' end)
and s_Block_Code like (case when isnull(@Block_Code,'') = '' then s_Block_Code else '%'+@Block_Code+'%' end)
and n_Block_state = (case when isnull(@Block_state,0) = 0 then n_Block_state else @Block_state end)
 ) T_RowsCount 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Block_Name" DbType:"AnsiString" Value:""
（1）ParameterName:"@Block_Code" DbType:"AnsiString" Value:""
（2）ParameterName:"@Block_state" DbType:"Int32" Value:"1"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:34:55
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"null"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"null"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:34:56
类型：Query 查询对象：SelSessionState 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select top 1 LoginState = 
(case when 
DATEDIFF(MINUTE,tSessionStateRecord.d_LoginTime,GETDATE())
< tSessionStateRecord.n_HoldingTime then 0 else 1 end),
UserNO = tSessionStateRecord.s_UserNO,
UserName = tUser.s_UserName
 from tSessionStateRecord tSessionStateRecord with(nolock)
 left join tUser tUser with(nolock) on tSessionStateRecord.s_UserNO = tUser.s_UserNO
where tSessionStateRecord.s_IPAddress = @IPAddress 
and tSessionStateRecord.s_UserAgent = @UserAgent
and tSessionStateRecord.s_UserNO <> ''
and tUser.n_state = 1
order by tSessionStateRecord.d_LoginTime desc
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@IPAddress" DbType:"AnsiString" Value:"::1"
（1）ParameterName:"@UserAgent" DbType:"AnsiString" Value:"Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.79 Safari/537.36"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"null"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:34:56
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"null"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"null"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:34:56
类型：Query 查询对象：SelSessionState 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select top 1 LoginState = 
(case when 
DATEDIFF(MINUTE,tSessionStateRecord.d_LoginTime,GETDATE())
< tSessionStateRecord.n_HoldingTime then 0 else 1 end),
UserNO = tSessionStateRecord.s_UserNO,
UserName = tUser.s_UserName
 from tSessionStateRecord tSessionStateRecord with(nolock)
 left join tUser tUser with(nolock) on tSessionStateRecord.s_UserNO = tUser.s_UserNO
where tSessionStateRecord.s_IPAddress = @IPAddress 
and tSessionStateRecord.s_UserAgent = @UserAgent
and tSessionStateRecord.s_UserNO <> ''
and tUser.n_state = 1
order by tSessionStateRecord.d_LoginTime desc
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@IPAddress" DbType:"AnsiString" Value:"::1"
（1）ParameterName:"@UserAgent" DbType:"AnsiString" Value:"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"null"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:34:56
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:34:56
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:34:57
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:35:00
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:35:01
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:35:01
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:35:01
类型：Query 查询对象：SelBlockList 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select * from ( select RowNumber=row_number() over(order by n_Block_Id asc),* from (
select
--[Columns]
      n_Block_Id
      ,[s_Block_Name]
      ,[s_Block_Code]
      ,[s_Block_Address]
      ,[s_Block_Phone]
      ,[s_Block_leadingCadre]
      ,[s_Block_Purpose]
      ,[s_Block_Remark]
      ,[s_Block_CustomFields1]
      ,[s_Block_CustomFields2]
      ,[s_Block_CustomFields3]
      ,[s_Block_CustomFields4]
      ,[s_Block_CustomFields5]
      ,[s_Block_CustomFields6]
      ,[s_Block_CustomFields7]
      ,[s_Block_CustomFields8]
      ,[s_Block_CustomFields9]
      ,[s_Block_CustomFields10]
      ,n_Block_state=(case n_Block_state when 1 then '正常' else '停用' end)
--[/Columns]
from tBlock with(nolock)
where s_Block_Name like (case when isnull(@Block_Name,'') = '' then s_Block_Name else '%'+@Block_Name+'%' end)
and s_Block_Code like (case when isnull(@Block_Code,'') = '' then s_Block_Code else '%'+@Block_Code+'%' end)
and n_Block_state = (case when isnull(@Block_state,0) = 0 then n_Block_state else @Block_state end)
) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Block_Name" DbType:"AnsiString" Value:""
（1）ParameterName:"@Block_Code" DbType:"AnsiString" Value:""
（2）ParameterName:"@Block_state" DbType:"Int32" Value:"1"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:35:01
类型：Query 查询对象：SelBlockList 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:
 select RowsCount=COUNT(1) from ( 
select
 R=1 
from tBlock with(nolock)
where s_Block_Name like (case when isnull(@Block_Name,'') = '' then s_Block_Name else '%'+@Block_Name+'%' end)
and s_Block_Code like (case when isnull(@Block_Code,'') = '' then s_Block_Code else '%'+@Block_Code+'%' end)
and n_Block_state = (case when isnull(@Block_state,0) = 0 then n_Block_state else @Block_state end)
 ) T_RowsCount 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Block_Name" DbType:"AnsiString" Value:""
（1）ParameterName:"@Block_Code" DbType:"AnsiString" Value:""
（2）ParameterName:"@Block_state" DbType:"Int32" Value:"1"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:41:13
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"null"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"null"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:41:13
类型：Query 查询对象：SelSessionState 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select top 1 LoginState = 
(case when 
DATEDIFF(MINUTE,tSessionStateRecord.d_LoginTime,GETDATE())
< tSessionStateRecord.n_HoldingTime then 0 else 1 end),
UserNO = tSessionStateRecord.s_UserNO,
UserName = tUser.s_UserName
 from tSessionStateRecord tSessionStateRecord with(nolock)
 left join tUser tUser with(nolock) on tSessionStateRecord.s_UserNO = tUser.s_UserNO
where tSessionStateRecord.s_IPAddress = @IPAddress 
and tSessionStateRecord.s_UserAgent = @UserAgent
and tSessionStateRecord.s_UserNO <> ''
and tUser.n_state = 1
order by tSessionStateRecord.d_LoginTime desc
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@IPAddress" DbType:"AnsiString" Value:"::1"
（1）ParameterName:"@UserAgent" DbType:"AnsiString" Value:"Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.79 Safari/537.36"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"null"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:41:14
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"null"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"null"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:41:14
类型：Query 查询对象：SelSessionState 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select top 1 LoginState = 
(case when 
DATEDIFF(MINUTE,tSessionStateRecord.d_LoginTime,GETDATE())
< tSessionStateRecord.n_HoldingTime then 0 else 1 end),
UserNO = tSessionStateRecord.s_UserNO,
UserName = tUser.s_UserName
 from tSessionStateRecord tSessionStateRecord with(nolock)
 left join tUser tUser with(nolock) on tSessionStateRecord.s_UserNO = tUser.s_UserNO
where tSessionStateRecord.s_IPAddress = @IPAddress 
and tSessionStateRecord.s_UserAgent = @UserAgent
and tSessionStateRecord.s_UserNO <> ''
and tUser.n_state = 1
order by tSessionStateRecord.d_LoginTime desc
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@IPAddress" DbType:"AnsiString" Value:"::1"
（1）ParameterName:"@UserAgent" DbType:"AnsiString" Value:"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"null"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:41:14
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:41:14
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:41:14
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:41:19
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:41:20
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:41:20
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:41:20
类型：Query 查询对象：SelBlockList 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select * from ( select RowNumber=row_number() over(order by n_Block_Id asc),* from (
select
--[Columns]
      n_Block_Id
      ,[s_Block_Name]
      ,[s_Block_Code]
      ,[s_Block_Address]
      ,[s_Block_Phone]
      ,[s_Block_leadingCadre]
      ,[s_Block_Purpose]
      ,[s_Block_Remark]
      ,[s_Block_CustomFields1]
      ,[s_Block_CustomFields2]
      ,[s_Block_CustomFields3]
      ,[s_Block_CustomFields4]
      ,[s_Block_CustomFields5]
      ,[s_Block_CustomFields6]
      ,[s_Block_CustomFields7]
      ,[s_Block_CustomFields8]
      ,[s_Block_CustomFields9]
      ,[s_Block_CustomFields10]
      ,n_Block_state=(case n_Block_state when 1 then '正常' else '停用' end)
--[/Columns]
from tBlock with(nolock)
where s_Block_Name like (case when isnull(@Block_Name,'') = '' then s_Block_Name else '%'+@Block_Name+'%' end)
and s_Block_Code like (case when isnull(@Block_Code,'') = '' then s_Block_Code else '%'+@Block_Code+'%' end)
and n_Block_state = (case when isnull(@Block_state,0) = 0 then n_Block_state else @Block_state end)
) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Block_Name" DbType:"AnsiString" Value:""
（1）ParameterName:"@Block_Code" DbType:"AnsiString" Value:""
（2）ParameterName:"@Block_state" DbType:"Int32" Value:"1"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:41:20
类型：Query 查询对象：SelBlockList 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:
 select RowsCount=COUNT(1) from ( 
select
 R=1 
from tBlock with(nolock)
where s_Block_Name like (case when isnull(@Block_Name,'') = '' then s_Block_Name else '%'+@Block_Name+'%' end)
and s_Block_Code like (case when isnull(@Block_Code,'') = '' then s_Block_Code else '%'+@Block_Code+'%' end)
and n_Block_state = (case when isnull(@Block_state,0) = 0 then n_Block_state else @Block_state end)
 ) T_RowsCount 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Block_Name" DbType:"AnsiString" Value:""
（1）ParameterName:"@Block_Code" DbType:"AnsiString" Value:""
（2）ParameterName:"@Block_state" DbType:"Int32" Value:"1"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:48:09
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"null"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"null"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:48:09
类型：Query 查询对象：SelSessionState 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select top 1 LoginState = 
(case when 
DATEDIFF(MINUTE,tSessionStateRecord.d_LoginTime,GETDATE())
< tSessionStateRecord.n_HoldingTime then 0 else 1 end),
UserNO = tSessionStateRecord.s_UserNO,
UserName = tUser.s_UserName
 from tSessionStateRecord tSessionStateRecord with(nolock)
 left join tUser tUser with(nolock) on tSessionStateRecord.s_UserNO = tUser.s_UserNO
where tSessionStateRecord.s_IPAddress = @IPAddress 
and tSessionStateRecord.s_UserAgent = @UserAgent
and tSessionStateRecord.s_UserNO <> ''
and tUser.n_state = 1
order by tSessionStateRecord.d_LoginTime desc
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@IPAddress" DbType:"AnsiString" Value:"::1"
（1）ParameterName:"@UserAgent" DbType:"AnsiString" Value:"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"null"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:48:09
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:48:09
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:48:10
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:48:13
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:48:14
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:48:14
类型：Query 查询对象：SelOperatorRoleID 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select OperatorRoleID=s_RoleID from tRole where s_RoleID in( select s_RoleID from tUserRole where s_UserID=@UserNO)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:48:14
类型：Query 查询对象：SelBlockList 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
select * from ( select RowNumber=row_number() over(order by n_Block_Id asc),* from (
select
--[Columns]
      n_Block_Id
      ,[s_Block_Name]
      ,[s_Block_Code]
      ,[s_Block_Address]
      ,[s_Block_Phone]
      ,[s_Block_leadingCadre]
      ,[s_Block_Purpose]
      ,[s_Block_Remark]
      ,[s_Block_CustomFields1]
      ,[s_Block_CustomFields2]
      ,[s_Block_CustomFields3]
      ,[s_Block_CustomFields4]
      ,[s_Block_CustomFields5]
      ,[s_Block_CustomFields6]
      ,[s_Block_CustomFields7]
      ,[s_Block_CustomFields8]
      ,[s_Block_CustomFields9]
      ,[s_Block_CustomFields10]
      ,n_Block_state=(case n_Block_state when 1 then '正常' else '停用' end)
--[/Columns]
from tBlock with(nolock)
where s_Block_Name like (case when isnull(@Block_Name,'') = '' then s_Block_Name else '%'+@Block_Name+'%' end)
and s_Block_Code like (case when isnull(@Block_Code,'') = '' then s_Block_Code else '%'+@Block_Code+'%' end)
and n_Block_state = (case when isnull(@Block_state,0) = 0 then n_Block_state else @Block_state end)
) T_pagenation  ) TT_pagenation  where RowNumber between @beginIndex and @endIndex 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Block_Name" DbType:"AnsiString" Value:""
（1）ParameterName:"@Block_Code" DbType:"AnsiString" Value:""
（2）ParameterName:"@Block_state" DbType:"Int32" Value:"1"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 15:48:14
类型：Query 查询对象：SelBlockList 
说明：执行查询对象查询(合计查询)
***************************************************************************************************************
SQL:
 select RowsCount=COUNT(1) from ( 
select
 R=1 
from tBlock with(nolock)
where s_Block_Name like (case when isnull(@Block_Name,'') = '' then s_Block_Name else '%'+@Block_Name+'%' end)
and s_Block_Code like (case when isnull(@Block_Code,'') = '' then s_Block_Code else '%'+@Block_Code+'%' end)
and n_Block_state = (case when isnull(@Block_state,0) = 0 then n_Block_state else @Block_state end)
 ) T_RowsCount 
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@Block_Name" DbType:"AnsiString" Value:""
（1）ParameterName:"@Block_Code" DbType:"AnsiString" Value:""
（2）ParameterName:"@Block_state" DbType:"Int32" Value:"1"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（4）ParameterName:"@OperatorRoleID" DbType:"AnsiString" Value:"001"
（5）ParameterName:"@beginIndex" DbType:"Int32" Value:"1"
（6）ParameterName:"@endIndex" DbType:"Int32" Value:"50"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 17:13:45
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"null"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"null"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 17:13:58
类型：Business 业务对象：UserLogin 
说明：执行业务检查：1.*.用户不存在
***************************************************************************************************************
SQL:
select 1 from tUser where s_UserNO=@:UserNO
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@IPAddress" DbType:"AnsiString" Value:"::1"
（1）ParameterName:"@UserAgent" DbType:"AnsiString" Value:"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:"null"
（3）ParameterName:"@UserName" DbType:"AnsiString" Value:"null"
（4）ParameterName:"@Password" DbType:"AnsiString" Value:"D63901D9A1C3CC97"
（5）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 17:13:58
类型：Business 业务对象：UserLogin 
说明：执行业务检查：2.*.用户密码错误
***************************************************************************************************************
SQL:
select 1 from tUser where s_UserNO=@:UserNO and s_Password=@:Password
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@IPAddress" DbType:"AnsiString" Value:"::1"
（1）ParameterName:"@UserAgent" DbType:"AnsiString" Value:"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:""
（3）ParameterName:"@UserName" DbType:"AnsiString" Value:""
（4）ParameterName:"@Password" DbType:"AnsiString" Value:"D63901D9A1C3CC97"
（5）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 17:13:58
类型：Business 业务对象：UserLogin 
说明：执行业务过程[1]：0.查询用户名
***************************************************************************************************************
SQL:
select UserName = s_UserName from tUser where s_UserNO=@UserNO
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@IPAddress" DbType:"AnsiString" Value:"::1"
（1）ParameterName:"@UserAgent" DbType:"AnsiString" Value:"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36"
（2）ParameterName:"@Operator" DbType:"AnsiString" Value:""
（3）ParameterName:"@UserName" DbType:"AnsiString" Value:"null"
（4）ParameterName:"@Password" DbType:"AnsiString" Value:"D63901D9A1C3CC97"
（5）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 17:13:59
类型：Business 业务对象：UpdateSessionState 
说明：执行业务过程[1]：0.更新最新的Session状态
***************************************************************************************************************
SQL:

if not exists(select 1 from tSessionStateRecord with(nolock) where [s_IPAddress] = @IPAddress and [s_UserAgent] = @UserAgent and s_UserNO = @UserNO)
begin

INSERT INTO [tSessionStateRecord]
           ([s_IPAddress]
           ,[s_UserAgent]
           ,s_UserNO
           ,[d_LoginTime]
           ,n_HoldingTime)
     VALUES
           (@IPAddress
           ,@UserAgent
           ,@UserNO
           ,GETDATE()
           ,99999999) 

end
else
begin

update [tSessionStateRecord] set [d_LoginTime] = GETDATE(),n_HoldingTime = 99999999
where [s_IPAddress] = @IPAddress and [s_UserAgent] = @UserAgent
and s_UserNO = @UserNO



end
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Password" DbType:"AnsiString" Value:"D63901D9A1C3CC97"
（2）ParameterName:"@IPAddress" DbType:"AnsiString" Value:"::1"
（3）ParameterName:"@Operator" DbType:"AnsiString" Value:"null"
（4）ParameterName:"@UserAgent" DbType:"AnsiString" Value:"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 17:13:59
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 17:13:59
类型：Query 查询对象：SelPowersByUserNO 
说明：执行查询对象查询(1)
***************************************************************************************************************
SQL:
if exists(
	select 1 from tUser where s_UserNO=@UserNO
)
--如果是登录用户
begin
	select RoleID=ur.s_RoleID,PowerID=rp.s_PowerID 
	into #t1
	from 
	tUser u
	join tUserRole ur on u.s_UserNO=ur.s_UserID
	join tRolePower rp on rp.s_RoleID=ur.s_RoleID
	where s_UserNO=@UserNO
	
	insert into #t1 (RoleID,PowerID) 
	select RoleID='defaule',PowerID=s_PowerID  from tPower where n_Type=1
	
	select * from #t1
drop table #t1
end
else
	--如果是非登录用户，只获取公开权限
	select RoleID='public',PowerID=s_PowerID  from tPower where b_IsPublic=1

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"admin"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 17:14:24
类型：Business 业务对象：UserToolsLogin 
说明：执行业务检查：1.*.用户不存在
***************************************************************************************************************
SQL:
select 1 from [TopsWMS_FRM].[dbo].[FRM_Developer] where s_UserNO = @:UserNO and n_state = 1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"heweijian"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@Password" DbType:"AnsiString" Value:"F7D46DABEE7173DB"
（3）ParameterName:"@UserName" DbType:"AnsiString" Value:"null"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 17:14:24
类型：Business 业务对象：UserToolsLogin 
说明：执行业务检查：2.*.用户密码错误
***************************************************************************************************************
SQL:
select 1 from [TopsWMS_FRM].[dbo].[FRM_Developer] where s_UserNO = @UserNO and s_EncryptionCipher = @:Password and n_state = 1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"heweijian"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@Password" DbType:"AnsiString" Value:"F7D46DABEE7173DB"
（3）ParameterName:"@UserName" DbType:"AnsiString" Value:""
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
**************************************************************************************************************------>2022/3/18 17:14:25
类型：Business 业务对象：UserToolsLogin 
说明：执行业务过程[1]：0.查询用户名
***************************************************************************************************************
SQL:
select UserName = s_UserName from [TopsWMS_FRM].[dbo].[FRM_Developer] where s_UserNO = @UserNO and n_state = 1
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
参数：
（0）ParameterName:"@UserNO" DbType:"AnsiString" Value:"heweijian"
（1）ParameterName:"@Operator" DbType:"AnsiString" Value:"admin"
（2）ParameterName:"@Password" DbType:"AnsiString" Value:"F7D46DABEE7173DB"
（3）ParameterName:"@UserName" DbType:"AnsiString" Value:"null"
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^